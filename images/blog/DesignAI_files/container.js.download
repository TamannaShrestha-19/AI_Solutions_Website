(()=>{var Hc=Object.create;var En=Object.defineProperty;var jc=Object.getOwnPropertyDescriptor;var qc=Object.getOwnPropertyNames;var zc=Object.getPrototypeOf,Xc=Object.prototype.hasOwnProperty;var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Qc=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of qc(e))!Xc.call(t,n)&&n!==r&&En(t,n,{get:()=>e[n],enumerable:!(i=jc(e,n))||i.enumerable});return t};var xt=(t,e,r)=>(r=t!=null?Hc(zc(t)):{},Qc(e||!t||!t.__esModule?En(r,"default",{value:t,enumerable:!0}):r,t));var hi=b((dh,An)=>{"use strict";var Tn=Object.prototype.toString;An.exports=function(e){var r=Tn.call(e),i=r==="[object Arguments]";return i||(i=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Tn.call(e.callee)==="[object Function]"),i}});var Mn=b((mh,Pn)=>{"use strict";var Cn;Object.keys||(wt=Object.prototype.hasOwnProperty,gi=Object.prototype.toString,In=hi(),yi=Object.prototype.propertyIsEnumerable,On=!yi.call({toString:null},"toString"),Dn=yi.call(function(){},"prototype"),Et=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],sr=function(t){var e=t.constructor;return e&&e.prototype===t},Nn={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Fn=(function(){if(typeof window>"u")return!1;for(var t in window)try{if(!Nn["$"+t]&&wt.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{sr(window[t])}catch{return!0}}catch{return!0}return!1})(),Rn=function(t){if(typeof window>"u"||!Fn)return sr(t);try{return sr(t)}catch{return!1}},Cn=function(e){var r=e!==null&&typeof e=="object",i=gi.call(e)==="[object Function]",n=In(e),o=r&&gi.call(e)==="[object String]",s=[];if(!r&&!i&&!n)throw new TypeError("Object.keys called on a non-object");var a=Dn&&i;if(o&&e.length>0&&!wt.call(e,0))for(var l=0;l<e.length;++l)s.push(String(l));if(n&&e.length>0)for(var c=0;c<e.length;++c)s.push(String(c));else for(var p in e)!(a&&p==="prototype")&&wt.call(e,p)&&s.push(String(p));if(On)for(var m=Rn(e),f=0;f<Et.length;++f)!(m&&Et[f]==="constructor")&&wt.call(e,Et[f])&&s.push(Et[f]);return s});var wt,gi,In,yi,On,Dn,Et,sr,Nn,Fn,Rn;Pn.exports=Cn});var Un=b((hh,Wn)=>{"use strict";var Jc=Array.prototype.slice,Zc=hi(),Ln=Object.keys,ar=Ln?function(e){return Ln(e)}:Mn(),kn=Object.keys;ar.shim=function(){if(Object.keys){var e=(function(){var r=Object.keys(arguments);return r&&r.length===arguments.length})(1,2);e||(Object.keys=function(i){return Zc(i)?kn(Jc.call(i)):kn(i)})}else Object.keys=ar;return Object.keys||ar};Wn.exports=ar});var Le=b((gh,Gn)=>{"use strict";var lr=Object.defineProperty||!1;if(lr)try{lr({},"a",{value:1})}catch{lr=!1}Gn.exports=lr});var cr=b((yh,Bn)=>{"use strict";Bn.exports=SyntaxError});var de=b((Sh,Kn)=>{"use strict";Kn.exports=TypeError});var Yn=b((bh,$n)=>{"use strict";$n.exports=Object.getOwnPropertyDescriptor});var _e=b((_h,Vn)=>{"use strict";var ur=Yn();if(ur)try{ur([],"length")}catch{ur=null}Vn.exports=ur});var Si=b((vh,qn)=>{"use strict";var Hn=Le(),eu=cr(),ke=de(),jn=_e();qn.exports=function(e,r,i){if(!e||typeof e!="object"&&typeof e!="function")throw new ke("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new ke("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new ke("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new ke("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new ke("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new ke("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!jn&&jn(e,r);if(Hn)Hn(e,r,{configurable:s===null&&l?l.configurable:!s,enumerable:n===null&&l?l.enumerable:!n,value:i,writable:o===null&&l?l.writable:!o});else if(a||!n&&!o&&!s)e[r]=i;else throw new eu("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var _i=b((xh,Xn)=>{"use strict";var bi=Le(),zn=function(){return!!bi};zn.hasArrayLengthDefineBug=function(){if(!bi)return null;try{return bi([],"length",{value:1}).length!==1}catch{return!0}};Xn.exports=zn});var vi=b((wh,eo)=>{"use strict";var tu=Un(),ru=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",iu=Object.prototype.toString,nu=Array.prototype.concat,Qn=Si(),ou=function(t){return typeof t=="function"&&iu.call(t)==="[object Function]"},Jn=_i()(),su=function(t,e,r,i){if(e in t){if(i===!0){if(t[e]===r)return}else if(!ou(i)||!i())return}Jn?Qn(t,e,r,!0):Qn(t,e,r)},Zn=function(t,e){var r=arguments.length>2?arguments[2]:{},i=tu(e);ru&&(i=nu.call(i,Object.getOwnPropertySymbols(e)));for(var n=0;n<i.length;n+=1)su(t,i[n],e[i[n]],r[i[n]])};Zn.supportsDescriptors=!!Jn;eo.exports=Zn});var xi=b((Eh,to)=>{"use strict";to.exports=Object});var wi=b((Th,ro)=>{"use strict";ro.exports=Error});var Ei=b((Ah,io)=>{"use strict";io.exports=EvalError});var Ti=b((Ih,no)=>{"use strict";no.exports=RangeError});var Ai=b((Oh,oo)=>{"use strict";oo.exports=ReferenceError});var Ii=b((Dh,so)=>{"use strict";so.exports=URIError});var lo=b((Nh,ao)=>{"use strict";ao.exports=Math.abs});var uo=b((Fh,co)=>{"use strict";co.exports=Math.floor});var fo=b((Rh,po)=>{"use strict";po.exports=Math.max});var ho=b((Ch,mo)=>{"use strict";mo.exports=Math.min});var yo=b((Ph,go)=>{"use strict";go.exports=Math.pow});var bo=b((Mh,So)=>{"use strict";So.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var n=42;e[r]=n;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==n||a.enumerable!==!0)return!1}return!0}});var Oi=b((Lh,vo)=>{"use strict";var _o=typeof Symbol<"u"&&Symbol,au=bo();vo.exports=function(){return typeof _o!="function"||typeof Symbol!="function"||typeof _o("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:au()}});var Eo=b((kh,wo)=>{"use strict";var lu="Function.prototype.bind called on incompatible ",cu=Object.prototype.toString,uu=Math.max,pu="[object Function]",xo=function(e,r){for(var i=[],n=0;n<e.length;n+=1)i[n]=e[n];for(var o=0;o<r.length;o+=1)i[o+e.length]=r[o];return i},fu=function(e,r){for(var i=[],n=r||0,o=0;n<e.length;n+=1,o+=1)i[o]=e[n];return i},du=function(t,e){for(var r="",i=0;i<t.length;i+=1)r+=t[i],i+1<t.length&&(r+=e);return r};wo.exports=function(e){var r=this;if(typeof r!="function"||cu.apply(r)!==pu)throw new TypeError(lu+r);for(var i=fu(arguments,1),n,o=function(){if(this instanceof n){var p=r.apply(this,xo(i,arguments));return Object(p)===p?p:this}return r.apply(e,xo(i,arguments))},s=uu(0,r.length-i.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(n=Function("binder","return function ("+du(a,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,n.prototype=new c,c.prototype=null}return n}});var ie=b((Wh,To)=>{"use strict";var mu=Eo();To.exports=Function.prototype.bind||mu});var pr=b((Uh,Ao)=>{"use strict";Ao.exports=Function.prototype.call});var fr=b((Gh,Io)=>{"use strict";Io.exports=Function.prototype.apply});var Do=b((Bh,Oo)=>{"use strict";Oo.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var Di=b((Kh,No)=>{"use strict";var hu=ie(),gu=fr(),yu=pr(),Su=Do();No.exports=Su||hu.call(yu,gu)});var dr=b(($h,Fo)=>{"use strict";var bu=ie(),_u=de(),vu=pr(),xu=Di();Fo.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new _u("a function is required");return xu(bu,vu,e)}});var Lo=b((Yh,Mo)=>{"use strict";var wu=dr(),Ro=_e(),Eu=[].__proto__===Array.prototype,Ni=Eu&&Ro&&Ro(Object.prototype,"__proto__"),Po=Object,Co=Po.getPrototypeOf;Mo.exports=Ni&&typeof Ni.get=="function"?wu([Ni.get]):typeof Co=="function"?function(e){return Co(e==null?e:Po(e))}:!1});var Fi=b((Vh,ko)=>{"use strict";var Tu=Function.prototype.call,Au=Object.prototype.hasOwnProperty,Iu=ie();ko.exports=Iu.call(Tu,Au)});var Vo=b((Hh,Yo)=>{"use strict";var O,Bo=xi(),Ou=wi(),Du=Ei(),Nu=Ti(),Fu=Ai(),Be=cr(),Ge=de(),Ru=Ii(),Cu=lo(),Pu=uo(),Mu=fo(),Lu=ho(),ku=yo(),Ko=Function,Ri=function(t){try{return Ko('"use strict"; return ('+t+").constructor;")()}catch{}},Tt=_e(),Wu=Le(),Ci=function(){throw new Ge},Uu=Tt?(function(){try{return arguments.callee,Ci}catch{try{return Tt(arguments,"callee").get}catch{return Ci}}})():Ci,We=Oi()(),Gu=Lo(),L=typeof Reflect=="function"&&Reflect.getPrototypeOf||Bo.getPrototypeOf||Gu,$o=fr(),At=pr(),Ue={},Bu=typeof Uint8Array>"u"||!L?O:L(Uint8Array),ve={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?O:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?O:ArrayBuffer,"%ArrayIteratorPrototype%":We&&L?L([][Symbol.iterator]()):O,"%AsyncFromSyncIteratorPrototype%":O,"%AsyncFunction%":Ue,"%AsyncGenerator%":Ue,"%AsyncGeneratorFunction%":Ue,"%AsyncIteratorPrototype%":Ue,"%Atomics%":typeof Atomics>"u"?O:Atomics,"%BigInt%":typeof BigInt>"u"?O:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?O:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?O:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?O:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Ou,"%eval%":eval,"%EvalError%":Du,"%Float32Array%":typeof Float32Array>"u"?O:Float32Array,"%Float64Array%":typeof Float64Array>"u"?O:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?O:FinalizationRegistry,"%Function%":Ko,"%GeneratorFunction%":Ue,"%Int8Array%":typeof Int8Array>"u"?O:Int8Array,"%Int16Array%":typeof Int16Array>"u"?O:Int16Array,"%Int32Array%":typeof Int32Array>"u"?O:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":We&&L?L(L([][Symbol.iterator]())):O,"%JSON%":typeof JSON=="object"?JSON:O,"%Map%":typeof Map>"u"?O:Map,"%MapIteratorPrototype%":typeof Map>"u"||!We||!L?O:L(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Bo,"%Object.getOwnPropertyDescriptor%":Tt,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?O:Promise,"%Proxy%":typeof Proxy>"u"?O:Proxy,"%RangeError%":Nu,"%ReferenceError%":Fu,"%Reflect%":typeof Reflect>"u"?O:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?O:Set,"%SetIteratorPrototype%":typeof Set>"u"||!We||!L?O:L(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?O:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":We&&L?L(""[Symbol.iterator]()):O,"%Symbol%":We?Symbol:O,"%SyntaxError%":Be,"%ThrowTypeError%":Uu,"%TypedArray%":Bu,"%TypeError%":Ge,"%Uint8Array%":typeof Uint8Array>"u"?O:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?O:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?O:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?O:Uint32Array,"%URIError%":Ru,"%WeakMap%":typeof WeakMap>"u"?O:WeakMap,"%WeakRef%":typeof WeakRef>"u"?O:WeakRef,"%WeakSet%":typeof WeakSet>"u"?O:WeakSet,"%Function.prototype.call%":At,"%Function.prototype.apply%":$o,"%Object.defineProperty%":Wu,"%Math.abs%":Cu,"%Math.floor%":Pu,"%Math.max%":Mu,"%Math.min%":Lu,"%Math.pow%":ku};if(L)try{null.error}catch(t){Wo=L(L(t)),ve["%Error.prototype%"]=Wo}var Wo,Ku=function t(e){var r;if(e==="%AsyncFunction%")r=Ri("async function () {}");else if(e==="%GeneratorFunction%")r=Ri("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Ri("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=t("%AsyncGenerator%");n&&L&&(r=L(n.prototype))}return ve[e]=r,r},Uo={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},It=ie(),mr=Fi(),$u=It.call(At,Array.prototype.concat),Yu=It.call($o,Array.prototype.splice),Go=It.call(At,String.prototype.replace),hr=It.call(At,String.prototype.slice),Vu=It.call(At,RegExp.prototype.exec),Hu=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ju=/\\(\\)?/g,qu=function(e){var r=hr(e,0,1),i=hr(e,-1);if(r==="%"&&i!=="%")throw new Be("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new Be("invalid intrinsic syntax, expected opening `%`");var n=[];return Go(e,Hu,function(o,s,a,l){n[n.length]=a?Go(l,ju,"$1"):s||o}),n},zu=function(e,r){var i=e,n;if(mr(Uo,i)&&(n=Uo[i],i="%"+n[0]+"%"),mr(ve,i)){var o=ve[i];if(o===Ue&&(o=Ku(i)),typeof o>"u"&&!r)throw new Ge("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:o}}throw new Be("intrinsic "+e+" does not exist!")};Yo.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new Ge("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ge('"allowMissing" argument must be a boolean');if(Vu(/^%?[^%]*%?$/,e)===null)throw new Be("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=qu(e),n=i.length>0?i[0]:"",o=zu("%"+n+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(n=c[0],Yu(i,$u([0,1],c)));for(var p=1,m=!0;p<i.length;p+=1){var f=i[p],g=hr(f,0,1),y=hr(f,-1);if((g==='"'||g==="'"||g==="`"||y==='"'||y==="'"||y==="`")&&g!==y)throw new Be("property names with quotes must have matching quotes");if((f==="constructor"||!m)&&(l=!0),n+="."+f,s="%"+n+"%",mr(ve,s))a=ve[s];else if(a!=null){if(!(f in a)){if(!r)throw new Ge("base intrinsic for "+e+" exists, but the property is not available.");return}if(Tt&&p+1>=i.length){var S=Tt(a,f);m=!!S,m&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[f]}else m=mr(a,f),a=a[f];m&&!l&&(ve[s]=a)}}return a}});var Xo=b((jh,zo)=>{"use strict";var Xu=Vo(),Ho=Si(),Qu=_i()(),jo=_e(),qo=de(),Ju=Xu("%Math.floor%");zo.exports=function(e,r){if(typeof e!="function")throw new qo("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Ju(r)!==r)throw new qo("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],n=!0,o=!0;if("length"in e&&jo){var s=jo(e,"length");s&&!s.configurable&&(n=!1),s&&!s.writable&&(o=!1)}return(n||o||!i)&&(Qu?Ho(e,"length",r,!0,!0):Ho(e,"length",r)),e}});var Jo=b((qh,Qo)=>{"use strict";var Zu=ie(),ep=fr(),tp=Di();Qo.exports=function(){return tp(Zu,ep,arguments)}});var ts=b((zh,gr)=>{"use strict";var rp=Xo(),Zo=Le(),ip=dr(),es=Jo();gr.exports=function(e){var r=ip(arguments),i=e.length-(arguments.length-1);return rp(r,1+(i>0?i:0),!0)};Zo?Zo(gr.exports,"apply",{value:es}):gr.exports.apply=es});var is=b((Xh,rs)=>{"use strict";var np=de();rs.exports=function(e){if(e==null)throw new np(arguments.length>0&&arguments[1]||"Cannot call method on "+e);return e}});var os=b((Qh,ns)=>{"use strict";ns.exports=Object});var as=b((Jh,ss)=>{"use strict";ss.exports=Math.abs});var cs=b((Zh,ls)=>{"use strict";ls.exports=Math.floor});var ps=b((eg,us)=>{"use strict";us.exports=Math.max});var ds=b((tg,fs)=>{"use strict";fs.exports=Math.min});var hs=b((rg,ms)=>{"use strict";ms.exports=Math.pow});var ys=b((ig,gs)=>{"use strict";gs.exports=Math.round});var bs=b((ng,Ss)=>{"use strict";Ss.exports=Number.isNaN||function(e){return e!==e}});var vs=b((og,_s)=>{"use strict";var op=bs();_s.exports=function(e){return op(e)||e===0?e:e<0?-1:1}});var Pi=b((sg,xs)=>{"use strict";xs.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var Mi=b((ag,ws)=>{"use strict";var sp=xi();ws.exports=sp.getPrototypeOf||null});var Ds=b((lg,Os)=>{"use strict";var ap=dr(),Es=_e(),As;try{As=[].__proto__===Array.prototype}catch(t){if(!t||typeof t!="object"||!("code"in t)||t.code!=="ERR_PROTO_ACCESS")throw t}var Li=!!As&&Es&&Es(Object.prototype,"__proto__"),Is=Object,Ts=Is.getPrototypeOf;Os.exports=Li&&typeof Li.get=="function"?ap([Li.get]):typeof Ts=="function"?function(e){return Ts(e==null?e:Is(e))}:!1});var Ps=b((cg,Cs)=>{"use strict";var Ns=Pi(),Fs=Mi(),Rs=Ds();Cs.exports=Ns?function(e){return Ns(e)}:Fs?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return Fs(e)}:Rs?function(e){return Rs(e)}:null});var ki=b((ug,Ms)=>{"use strict";Ms.exports=Function.prototype.apply});var yr=b((pg,Ls)=>{"use strict";Ls.exports=Function.prototype.call});var $s=b((fg,Ks)=>{"use strict";var A,lp=os(),cp=wi(),up=Ei(),pp=Ti(),fp=Ai(),Ve=cr(),Ye=de(),dp=Ii(),mp=as(),hp=cs(),gp=ps(),yp=ds(),Sp=hs(),bp=ys(),_p=vs(),Gs=Function,Wi=function(t){try{return Gs('"use strict"; return ('+t+").constructor;")()}catch{}},Ot=_e(),vp=Le(),Ui=function(){throw new Ye},xp=Ot?(function(){try{return arguments.callee,Ui}catch{try{return Ot(arguments,"callee").get}catch{return Ui}}})():Ui,Ke=Oi()(),k=Ps(),wp=Mi(),Ep=Pi(),Bs=ki(),Dt=yr(),$e={},Tp=typeof Uint8Array>"u"||!k?A:k(Uint8Array),xe={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?A:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?A:ArrayBuffer,"%ArrayIteratorPrototype%":Ke&&k?k([][Symbol.iterator]()):A,"%AsyncFromSyncIteratorPrototype%":A,"%AsyncFunction%":$e,"%AsyncGenerator%":$e,"%AsyncGeneratorFunction%":$e,"%AsyncIteratorPrototype%":$e,"%Atomics%":typeof Atomics>"u"?A:Atomics,"%BigInt%":typeof BigInt>"u"?A:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?A:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?A:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?A:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":cp,"%eval%":eval,"%EvalError%":up,"%Float16Array%":typeof Float16Array>"u"?A:Float16Array,"%Float32Array%":typeof Float32Array>"u"?A:Float32Array,"%Float64Array%":typeof Float64Array>"u"?A:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?A:FinalizationRegistry,"%Function%":Gs,"%GeneratorFunction%":$e,"%Int8Array%":typeof Int8Array>"u"?A:Int8Array,"%Int16Array%":typeof Int16Array>"u"?A:Int16Array,"%Int32Array%":typeof Int32Array>"u"?A:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ke&&k?k(k([][Symbol.iterator]())):A,"%JSON%":typeof JSON=="object"?JSON:A,"%Map%":typeof Map>"u"?A:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ke||!k?A:k(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":lp,"%Object.getOwnPropertyDescriptor%":Ot,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?A:Promise,"%Proxy%":typeof Proxy>"u"?A:Proxy,"%RangeError%":pp,"%ReferenceError%":fp,"%Reflect%":typeof Reflect>"u"?A:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?A:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ke||!k?A:k(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?A:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ke&&k?k(""[Symbol.iterator]()):A,"%Symbol%":Ke?Symbol:A,"%SyntaxError%":Ve,"%ThrowTypeError%":xp,"%TypedArray%":Tp,"%TypeError%":Ye,"%Uint8Array%":typeof Uint8Array>"u"?A:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?A:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?A:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?A:Uint32Array,"%URIError%":dp,"%WeakMap%":typeof WeakMap>"u"?A:WeakMap,"%WeakRef%":typeof WeakRef>"u"?A:WeakRef,"%WeakSet%":typeof WeakSet>"u"?A:WeakSet,"%Function.prototype.call%":Dt,"%Function.prototype.apply%":Bs,"%Object.defineProperty%":vp,"%Object.getPrototypeOf%":wp,"%Math.abs%":mp,"%Math.floor%":hp,"%Math.max%":gp,"%Math.min%":yp,"%Math.pow%":Sp,"%Math.round%":bp,"%Math.sign%":_p,"%Reflect.getPrototypeOf%":Ep};if(k)try{null.error}catch(t){ks=k(k(t)),xe["%Error.prototype%"]=ks}var ks,Ap=function t(e){var r;if(e==="%AsyncFunction%")r=Wi("async function () {}");else if(e==="%GeneratorFunction%")r=Wi("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Wi("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var n=t("%AsyncGenerator%");n&&k&&(r=k(n.prototype))}return xe[e]=r,r},Ws={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Nt=ie(),Sr=Fi(),Ip=Nt.call(Dt,Array.prototype.concat),Op=Nt.call(Bs,Array.prototype.splice),Us=Nt.call(Dt,String.prototype.replace),br=Nt.call(Dt,String.prototype.slice),Dp=Nt.call(Dt,RegExp.prototype.exec),Np=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Fp=/\\(\\)?/g,Rp=function(e){var r=br(e,0,1),i=br(e,-1);if(r==="%"&&i!=="%")throw new Ve("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new Ve("invalid intrinsic syntax, expected opening `%`");var n=[];return Us(e,Np,function(o,s,a,l){n[n.length]=a?Us(l,Fp,"$1"):s||o}),n},Cp=function(e,r){var i=e,n;if(Sr(Ws,i)&&(n=Ws[i],i="%"+n[0]+"%"),Sr(xe,i)){var o=xe[i];if(o===$e&&(o=Ap(i)),typeof o>"u"&&!r)throw new Ye("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:o}}throw new Ve("intrinsic "+e+" does not exist!")};Ks.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new Ye("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ye('"allowMissing" argument must be a boolean');if(Dp(/^%?[^%]*%?$/,e)===null)throw new Ve("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Rp(e),n=i.length>0?i[0]:"",o=Cp("%"+n+"%",r),s=o.name,a=o.value,l=!1,c=o.alias;c&&(n=c[0],Op(i,Ip([0,1],c)));for(var p=1,m=!0;p<i.length;p+=1){var f=i[p],g=br(f,0,1),y=br(f,-1);if((g==='"'||g==="'"||g==="`"||y==='"'||y==="'"||y==="`")&&g!==y)throw new Ve("property names with quotes must have matching quotes");if((f==="constructor"||!m)&&(l=!0),n+="."+f,s="%"+n+"%",Sr(xe,s))a=xe[s];else if(a!=null){if(!(f in a)){if(!r)throw new Ye("base intrinsic for "+e+" exists, but the property is not available.");return}if(Ot&&p+1>=i.length){var S=Ot(a,f);m=!!S,m&&"get"in S&&!("originalValue"in S.get)?a=S.get:a=a[f]}else m=Sr(a,f),a=a[f];m&&!l&&(xe[s]=a)}}return a}});var Vs=b((dg,Ys)=>{"use strict";Ys.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var js=b((mg,Hs)=>{"use strict";var Pp=ie(),Mp=ki(),Lp=yr(),kp=Vs();Hs.exports=kp||Pp.call(Lp,Mp)});var zs=b((hg,qs)=>{"use strict";var Wp=ie(),Up=de(),Gp=yr(),Bp=js();qs.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new Up("a function is required");return Bp(Wp,Gp,e)}});var Zs=b((gg,Js)=>{"use strict";var Xs=$s(),Qs=zs(),Kp=Qs([Xs("%String.prototype.indexOf%")]);Js.exports=function(e,r){var i=Xs(e,!!r);return typeof i=="function"&&Kp(e,".prototype.")>-1?Qs([i]):i}});var Gi=b((yg,ta)=>{"use strict";var $p=is(),ea=Zs(),Yp=ea("Object.prototype.propertyIsEnumerable"),Vp=ea("Array.prototype.push");ta.exports=function(e){var r=$p(e),i=[];for(var n in r)Yp(r,n)&&Vp(i,[n,r[n]]);return i}});var Bi=b((Sg,ra)=>{"use strict";var Hp=Gi();ra.exports=function(){return typeof Object.entries=="function"?Object.entries:Hp}});var na=b((bg,ia)=>{"use strict";var jp=Bi(),qp=vi();ia.exports=function(){var e=jp();return qp(Object,{entries:e},{entries:function(){return Object.entries!==e}}),e}});var la=b((_g,aa)=>{"use strict";var zp=vi(),Xp=ts(),Qp=Gi(),oa=Bi(),Jp=na(),sa=Xp(oa(),Object);zp(sa,{getPolyfill:oa,implementation:Qp,shim:Jp});aa.exports=sa});var Qi=b((Sb,tl)=>{"use strict";var ld=function(e){return cd(e)&&!ud(e)};function cd(t){return!!t&&typeof t=="object"}function ud(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||dd(t)}var pd=typeof Symbol=="function"&&Symbol.for,fd=pd?Symbol.for("react.element"):60103;function dd(t){return t.$$typeof===fd}function md(t){return Array.isArray(t)?[]:{}}function kt(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Qe(md(t),t,e):t}function hd(t,e,r){return t.concat(e).map(function(i){return kt(i,r)})}function gd(t,e){if(!e.customMerge)return Qe;var r=e.customMerge(t);return typeof r=="function"?r:Qe}function yd(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function Za(t){return Object.keys(t).concat(yd(t))}function el(t,e){try{return e in t}catch{return!1}}function Sd(t,e){return el(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function bd(t,e,r){var i={};return r.isMergeableObject(t)&&Za(t).forEach(function(n){i[n]=kt(t[n],r)}),Za(e).forEach(function(n){Sd(t,n)||(el(t,n)&&r.isMergeableObject(e[n])?i[n]=gd(n,r)(t[n],e[n],r):i[n]=kt(e[n],r))}),i}function Qe(t,e,r){r=r||{},r.arrayMerge=r.arrayMerge||hd,r.isMergeableObject=r.isMergeableObject||ld,r.cloneUnlessOtherwiseSpecified=kt;var i=Array.isArray(e),n=Array.isArray(t),o=i===n;return o?i?r.arrayMerge(t,e,r):bd(t,e,r):kt(e,r)}Qe.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(i,n){return Qe(i,n,r)},{})};var _d=Qe;tl.exports=_d});var El=b((O_,wl)=>{"use strict";wl.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var i,n,o;if(Array.isArray(e)){if(i=e.length,i!=r.length)return!1;for(n=i;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(n of e.entries())if(!r.has(n[0]))return!1;for(n of e.entries())if(!t(n[1],r.get(n[0])))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(n of e.entries())if(!r.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(i=e.length,i!=r.length)return!1;for(n=i;n--!==0;)if(e[n]!==r[n])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),i=o.length,i!==Object.keys(r).length)return!1;for(n=i;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=i;n--!==0;){var s=o[n];if(!t(e[s],r[s]))return!1}return!0}return e!==e&&r!==r}});var Cl=b((Y_,Rl)=>{"use strict";function Jd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}Rl.exports=function(t,e,r,i){e=e||"&",r=r||"=";var n={};if(typeof t!="string"||t.length===0)return n;var o=/\+/g;t=t.split(e);var s=1e3;i&&typeof i.maxKeys=="number"&&(s=i.maxKeys);var a=t.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var c=t[l].replace(o,"%20"),p=c.indexOf(r),m,f,g,y;p>=0?(m=c.substr(0,p),f=c.substr(p+1)):(m=c,f=""),g=decodeURIComponent(m),y=decodeURIComponent(f),Jd(n,g)?Array.isArray(n[g])?n[g].push(y):n[g]=[n[g],y]:n[g]=y}return n}});var Ml=b((V_,Pl)=>{"use strict";var Vt=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};Pl.exports=function(t,e,r,i){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(n){var o=encodeURIComponent(Vt(n))+r;return Array.isArray(t[n])?t[n].map(function(s){return o+encodeURIComponent(Vt(s))}).join(e):o+encodeURIComponent(Vt(t[n]))}).filter(Boolean).join(e):i?encodeURIComponent(Vt(i))+r+encodeURIComponent(Vt(t)):""}});var Ll=b(Ht=>{"use strict";Ht.decode=Ht.parse=Cl();Ht.encode=Ht.stringify=Ml()});(function(){"use strict";if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function t(u){try{return u.defaultView&&u.defaultView.frameElement||null}catch{return null}}var e=(function(u){for(var d=u,h=t(d);h;)d=h.ownerDocument,h=t(d);return d})(window.document),r=[],i=null,n=null;function o(u){this.time=u.time,this.target=u.target,this.rootBounds=y(u.rootBounds),this.boundingClientRect=y(u.boundingClientRect),this.intersectionRect=y(u.intersectionRect||g()),this.isIntersecting=!!u.intersectionRect;var d=this.boundingClientRect,h=d.width*d.height,_=this.intersectionRect,w=_.width*_.height;h?this.intersectionRatio=Number((w/h).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function s(u,d){var h=d||{};if(typeof u!="function")throw new Error("callback must be a function");if(h.root&&h.root.nodeType!=1&&h.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=l(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=u,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(h.rootMargin),this.thresholds=this._initThresholds(h.threshold),this.root=h.root||null,this.rootMargin=this._rootMarginValues.map(function(_){return _.value+_.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}s.prototype.THROTTLE_TIMEOUT=100,s.prototype.POLL_INTERVAL=null,s.prototype.USE_MUTATION_OBSERVER=!0,s._setupCrossOriginUpdater=function(){return i||(i=function(u,d){!u||!d?n=g():n=S(u,d),r.forEach(function(h){h._checkForIntersections()})}),i},s._resetCrossOriginUpdater=function(){i=null,n=null},s.prototype.observe=function(u){var d=this._observationTargets.some(function(h){return h.element==u});if(!d){if(!(u&&u.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:u,entry:null}),this._monitorIntersections(u.ownerDocument),this._checkForIntersections()}},s.prototype.unobserve=function(u){this._observationTargets=this._observationTargets.filter(function(d){return d.element!=u}),this._unmonitorIntersections(u.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},s.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},s.prototype.takeRecords=function(){var u=this._queuedEntries.slice();return this._queuedEntries=[],u},s.prototype._initThresholds=function(u){var d=u||[0];return Array.isArray(d)||(d=[d]),d.sort().filter(function(h,_,w){if(typeof h!="number"||isNaN(h)||h<0||h>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return h!==w[_-1]})},s.prototype._parseRootMargin=function(u){var d=u||"0px",h=d.split(/\s+/).map(function(_){var w=/^(-?\d*\.?\d+)(px|%)$/.exec(_);if(!w)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(w[1]),unit:w[2]}});return h[1]=h[1]||h[0],h[2]=h[2]||h[0],h[3]=h[3]||h[1],h},s.prototype._monitorIntersections=function(u){var d=u.defaultView;if(d&&this._monitoringDocuments.indexOf(u)==-1){var h=this._checkForIntersections,_=null,w=null;this.POLL_INTERVAL?_=d.setInterval(h,this.POLL_INTERVAL):(c(d,"resize",h,!0),c(u,"scroll",h,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in d&&(w=new d.MutationObserver(h),w.observe(u,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(u),this._monitoringUnsubscribes.push(function(){var F=u.defaultView;F&&(_&&F.clearInterval(_),p(F,"resize",h,!0)),p(u,"scroll",h,!0),w&&w.disconnect()});var R=this.root&&(this.root.ownerDocument||this.root)||e;if(u!=R){var N=t(u);N&&this._monitorIntersections(N.ownerDocument)}}},s.prototype._unmonitorIntersections=function(u){var d=this._monitoringDocuments.indexOf(u);if(d!=-1){var h=this.root&&(this.root.ownerDocument||this.root)||e,_=this._observationTargets.some(function(N){var F=N.element.ownerDocument;if(F==u)return!0;for(;F&&F!=h;){var G=t(F);if(F=G&&G.ownerDocument,F==u)return!0}return!1});if(!_){var w=this._monitoringUnsubscribes[d];if(this._monitoringDocuments.splice(d,1),this._monitoringUnsubscribes.splice(d,1),w(),u!=h){var R=t(u);R&&this._unmonitorIntersections(R.ownerDocument)}}}},s.prototype._unmonitorAllIntersections=function(){var u=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var d=0;d<u.length;d++)u[d]()},s.prototype._checkForIntersections=function(){if(!(!this.root&&i&&!n)){var u=this._rootIsInDom(),d=u?this._getRootRect():g();this._observationTargets.forEach(function(h){var _=h.element,w=f(_),R=this._rootContainsTarget(_),N=h.entry,F=u&&R&&this._computeTargetAndRootIntersection(_,w,d),G=null;this._rootContainsTarget(_)?(!i||this.root)&&(G=d):G=g();var H=h.entry=new o({time:a(),target:_,boundingClientRect:w,rootBounds:G,intersectionRect:F});N?u&&R?this._hasCrossedThreshold(N,H)&&this._queuedEntries.push(H):N&&N.isIntersecting&&this._queuedEntries.push(H):this._queuedEntries.push(H)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},s.prototype._computeTargetAndRootIntersection=function(u,d,h){if(window.getComputedStyle(u).display!="none"){for(var _=d,w=E(u),R=!1;!R&&w;){var N=null,F=w.nodeType==1?window.getComputedStyle(w):{};if(F.display=="none")return null;if(w==this.root||w.nodeType==9)if(R=!0,w==this.root||w==e)i&&!this.root?!n||n.width==0&&n.height==0?(w=null,N=null,_=null):N=n:N=h;else{var G=E(w),H=G&&f(G),_t=G&&this._computeTargetAndRootIntersection(G,H,h);H&&_t?(w=G,N=S(H,_t)):(w=null,_=null)}else{var Z=w.ownerDocument;w!=Z.body&&w!=Z.documentElement&&F.overflow!="visible"&&(N=f(w))}if(N&&(_=m(N,_)),!_)break;w=w&&E(w)}return _}},s.prototype._getRootRect=function(){var u;if(this.root&&!T(this.root))u=f(this.root);else{var d=T(this.root)?this.root:e,h=d.documentElement,_=d.body;u={top:0,left:0,right:h.clientWidth||_.clientWidth,width:h.clientWidth||_.clientWidth,bottom:h.clientHeight||_.clientHeight,height:h.clientHeight||_.clientHeight}}return this._expandRectByRootMargin(u)},s.prototype._expandRectByRootMargin=function(u){var d=this._rootMarginValues.map(function(_,w){return _.unit=="px"?_.value:_.value*(w%2?u.width:u.height)/100}),h={top:u.top-d[0],right:u.right+d[1],bottom:u.bottom+d[2],left:u.left-d[3]};return h.width=h.right-h.left,h.height=h.bottom-h.top,h},s.prototype._hasCrossedThreshold=function(u,d){var h=u&&u.isIntersecting?u.intersectionRatio||0:-1,_=d.isIntersecting?d.intersectionRatio||0:-1;if(h!==_)for(var w=0;w<this.thresholds.length;w++){var R=this.thresholds[w];if(R==h||R==_||R<h!=R<_)return!0}},s.prototype._rootIsInDom=function(){return!this.root||x(e,this.root)},s.prototype._rootContainsTarget=function(u){var d=this.root&&(this.root.ownerDocument||this.root)||e;return x(d,u)&&(!this.root||d==u.ownerDocument)},s.prototype._registerInstance=function(){r.indexOf(this)<0&&r.push(this)},s.prototype._unregisterInstance=function(){var u=r.indexOf(this);u!=-1&&r.splice(u,1)};function a(){return window.performance&&performance.now&&performance.now()}function l(u,d){var h=null;return function(){h||(h=setTimeout(function(){u(),h=null},d))}}function c(u,d,h,_){typeof u.addEventListener=="function"?u.addEventListener(d,h,_||!1):typeof u.attachEvent=="function"&&u.attachEvent("on"+d,h)}function p(u,d,h,_){typeof u.removeEventListener=="function"?u.removeEventListener(d,h,_||!1):typeof u.detachEvent=="function"&&u.detachEvent("on"+d,h)}function m(u,d){var h=Math.max(u.top,d.top),_=Math.min(u.bottom,d.bottom),w=Math.max(u.left,d.left),R=Math.min(u.right,d.right),N=R-w,F=_-h;return N>=0&&F>=0&&{top:h,bottom:_,left:w,right:R,width:N,height:F}||null}function f(u){var d;try{d=u.getBoundingClientRect()}catch{}return d?(d.width&&d.height||(d={top:d.top,right:d.right,bottom:d.bottom,left:d.left,width:d.right-d.left,height:d.bottom-d.top}),d):g()}function g(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function y(u){return!u||"x"in u?u:{top:u.top,y:u.top,bottom:u.bottom,left:u.left,x:u.left,right:u.right,width:u.width,height:u.height}}function S(u,d){var h=d.top-u.top,_=d.left-u.left;return{top:h,left:_,height:d.height,width:d.width,bottom:h+d.height,right:_+d.width}}function x(u,d){for(var h=d;h;){if(h==u)return!0;h=E(h)}return!1}function E(u){var d=u.parentNode;return u.nodeType==9&&u!=e?t(u):(d&&d.assignedSlot&&(d=d.assignedSlot.parentNode),d&&d.nodeType==11&&d.host?d.host:d)}function T(u){return u&&u.nodeType===9}window.IntersectionObserver=s,window.IntersectionObserverEntry=o})();var ca=xt(la());(function(){typeof globalThis!="object"&&(Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__)})();Object.entries||ca.default.shim();var Zp=Math.pow(10,8)*24*60*60*1e3,wg=-Zp,_r=6048e5,ua=864e5,Ki=6e4,$i=36e5;var Ft=43200,Yi=1440;var ef=3600;var pa=ef*24,Eg=pa*7,tf=pa*365.2425,rf=tf/12,Tg=rf*3,Vi=Symbol.for("constructDateFrom");function W(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Vi in t?t[Vi](e):t instanceof Date?new t.constructor(e):new Date(e)}function ee(t,...e){let r=W.bind(null,t||e.find(i=>typeof i=="object"));return e.map(r)}function I(t,e){return W(e||t,t)}function He(t){let e=I(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function Hi(t,e){let r=I(t,e?.in);return r.setHours(0,0,0,0),r}function vr(t,e,r){let[i,n]=ee(r?.in,t,e),o=Hi(i),s=Hi(n),a=+o-He(o),l=+s-He(s);return Math.round((a-l)/ua)}function da(t,e,r){let[i,n]=ee(r?.in,t,e),o=fa(i,n),s=Math.abs(vr(i,n));i.setDate(i.getDate()-o*s);let a=+(fa(i,n)===-o),l=o*(s-a);return l===0?0:l}function fa(t,e){let r=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return r<0?-1:r>0?1:r}var nf={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ma=(t,e,r)=>{let i,n=nf[t];return typeof n=="string"?i=n:e===1?i=n.one:i=n.other.replace("{{count}}",e.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function xr(t){return(e={})=>{let r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}var of={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sf={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},af={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ha={date:xr({formats:of,defaultWidth:"full"}),time:xr({formats:sf,defaultWidth:"full"}),dateTime:xr({formats:af,defaultWidth:"full"})};var lf={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ga=(t,e,r,i)=>lf[t];function je(t){return(e,r)=>{let i=r?.context?String(r.context):"standalone",n;if(i==="formatting"&&t.formattingValues){let s=t.defaultFormattingWidth||t.defaultWidth,a=r?.width?String(r.width):s;n=t.formattingValues[a]||t.formattingValues[s]}else{let s=t.defaultWidth,a=r?.width?String(r.width):t.defaultWidth;n=t.values[a]||t.values[s]}let o=t.argumentCallback?t.argumentCallback(e):e;return n[o]}}var cf={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},uf={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pf={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ff={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},df={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mf={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},hf=(t,e)=>{let r=Number(t),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ya={ordinalNumber:hf,era:je({values:cf,defaultWidth:"wide"}),quarter:je({values:uf,defaultWidth:"wide",argumentCallback:t=>t-1}),month:je({values:pf,defaultWidth:"wide"}),day:je({values:ff,defaultWidth:"wide"}),dayPeriod:je({values:df,defaultWidth:"wide",formattingValues:mf,defaultFormattingWidth:"wide"})};function qe(t){return(e,r={})=>{let i=r.width,n=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],o=e.match(n);if(!o)return null;let s=o[0],a=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?yf(a,m=>m.test(s)):gf(a,m=>m.test(s)),c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;let p=e.slice(s.length);return{value:c,rest:p}}}function gf(t,e){for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function yf(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function Sa(t){return(e,r={})=>{let i=e.match(t.matchPattern);if(!i)return null;let n=i[0],o=e.match(t.parsePattern);if(!o)return null;let s=t.valueCallback?t.valueCallback(o[0]):o[0];s=r.valueCallback?r.valueCallback(s):s;let a=e.slice(n.length);return{value:s,rest:a}}}var Sf=/^(\d+)(th|st|nd|rd)?/i,bf=/\d+/i,_f={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vf={any:[/^b/i,/^(a|c)/i]},xf={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},wf={any:[/1/i,/2/i,/3/i,/4/i]},Ef={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Tf={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Af={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},If={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Of={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Df={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ba={ordinalNumber:Sa({matchPattern:Sf,parsePattern:bf,valueCallback:t=>parseInt(t,10)}),era:qe({matchPatterns:_f,defaultMatchWidth:"wide",parsePatterns:vf,defaultParseWidth:"any"}),quarter:qe({matchPatterns:xf,defaultMatchWidth:"wide",parsePatterns:wf,defaultParseWidth:"any",valueCallback:t=>t+1}),month:qe({matchPatterns:Ef,defaultMatchWidth:"wide",parsePatterns:Tf,defaultParseWidth:"any"}),day:qe({matchPatterns:Af,defaultMatchWidth:"wide",parsePatterns:If,defaultParseWidth:"any"}),dayPeriod:qe({matchPatterns:Of,defaultMatchWidth:"any",parsePatterns:Df,defaultParseWidth:"any"})};var Rt={code:"en-US",formatDistance:ma,formatLong:ha,formatRelative:ga,localize:ya,match:ba,options:{weekStartsOn:0,firstWeekContainsDate:1}};var Nf={};function te(){return Nf}function _a(t,e){let r=I(t,e?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function va(t,e){let r=I(t,e?.in);return vr(r,_a(r))+1}function ne(t,e){let r=te(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,n=I(t,e?.in),o=n.getDay(),s=(o<i?7:0)+o-i;return n.setDate(n.getDate()-s),n.setHours(0,0,0,0),n}function we(t,e){return ne(t,{...e,weekStartsOn:1})}function wr(t,e){let r=I(t,e?.in),i=r.getFullYear(),n=W(r,0);n.setFullYear(i+1,0,4),n.setHours(0,0,0,0);let o=we(n),s=W(r,0);s.setFullYear(i,0,4),s.setHours(0,0,0,0);let a=we(s);return r.getTime()>=o.getTime()?i+1:r.getTime()>=a.getTime()?i:i-1}function xa(t,e){let r=wr(t,e),i=W(e?.in||t,0);return i.setFullYear(r,0,4),i.setHours(0,0,0,0),we(i)}function wa(t,e){let r=I(t,e?.in),i=+we(r)-+xa(r);return Math.round(i/_r)+1}function Er(t,e){let r=I(t,e?.in),i=r.getFullYear(),n=te(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=W(e?.in||t,0);s.setFullYear(i+1,0,o),s.setHours(0,0,0,0);let a=ne(s,e),l=W(e?.in||t,0);l.setFullYear(i,0,o),l.setHours(0,0,0,0);let c=ne(l,e);return+r>=+a?i+1:+r>=+c?i:i-1}function Ea(t,e){let r=te(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,n=Er(t,e),o=W(e?.in||t,0);return o.setFullYear(n,0,i),o.setHours(0,0,0,0),ne(o,e)}function Ta(t,e){let r=I(t,e?.in),i=+ne(r,e)-+Ea(r,e);return Math.round(i/_r)+1}function D(t,e){let r=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return r+i}var oe={y(t,e){let r=t.getFullYear(),i=r>0?r:1-r;return D(e==="yy"?i%100:i,e.length)},M(t,e){let r=t.getMonth();return e==="M"?String(r+1):D(r+1,2)},d(t,e){return D(t.getDate(),e.length)},a(t,e){let r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return D(t.getHours()%12||12,e.length)},H(t,e){return D(t.getHours(),e.length)},m(t,e){return D(t.getMinutes(),e.length)},s(t,e){return D(t.getSeconds(),e.length)},S(t,e){let r=e.length,i=t.getMilliseconds(),n=Math.trunc(i*Math.pow(10,r-3));return D(n,e.length)}};var ze={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ji={G:function(t,e,r){let i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){let i=t.getFullYear(),n=i>0?i:1-i;return r.ordinalNumber(n,{unit:"year"})}return oe.y(t,e)},Y:function(t,e,r,i){let n=Er(t,i),o=n>0?n:1-n;if(e==="YY"){let s=o%100;return D(s,2)}return e==="Yo"?r.ordinalNumber(o,{unit:"year"}):D(o,e.length)},R:function(t,e){let r=wr(t);return D(r,e.length)},u:function(t,e){let r=t.getFullYear();return D(r,e.length)},Q:function(t,e,r){let i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return D(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,r){let i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return D(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,r){let i=t.getMonth();switch(e){case"M":case"MM":return oe.M(t,e);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,r){let i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return D(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,r,i){let n=Ta(t,i);return e==="wo"?r.ordinalNumber(n,{unit:"week"}):D(n,e.length)},I:function(t,e,r){let i=wa(t);return e==="Io"?r.ordinalNumber(i,{unit:"week"}):D(i,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):oe.d(t,e)},D:function(t,e,r){let i=va(t);return e==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):D(i,e.length)},E:function(t,e,r){let i=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,r,i){let n=t.getDay(),o=(n-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return D(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(t,e,r,i){let n=t.getDay(),o=(n-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return D(o,e.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(t,e,r){let i=t.getDay(),n=i===0?7:i;switch(e){case"i":return String(n);case"ii":return D(n,e.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,r){let n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,e,r){let i=t.getHours(),n;switch(i===12?n=ze.noon:i===0?n=ze.midnight:n=i/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,e,r){let i=t.getHours(),n;switch(i>=17?n=ze.evening:i>=12?n=ze.afternoon:i>=4?n=ze.morning:n=ze.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return oe.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):oe.H(t,e)},K:function(t,e,r){let i=t.getHours()%12;return e==="Ko"?r.ordinalNumber(i,{unit:"hour"}):D(i,e.length)},k:function(t,e,r){let i=t.getHours();return i===0&&(i=24),e==="ko"?r.ordinalNumber(i,{unit:"hour"}):D(i,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):oe.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):oe.s(t,e)},S:function(t,e){return oe.S(t,e)},X:function(t,e,r){let i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return Ia(i);case"XXXX":case"XX":return Ee(i);case"XXXXX":case"XXX":default:return Ee(i,":")}},x:function(t,e,r){let i=t.getTimezoneOffset();switch(e){case"x":return Ia(i);case"xxxx":case"xx":return Ee(i);case"xxxxx":case"xxx":default:return Ee(i,":")}},O:function(t,e,r){let i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Aa(i,":");case"OOOO":default:return"GMT"+Ee(i,":")}},z:function(t,e,r){let i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Aa(i,":");case"zzzz":default:return"GMT"+Ee(i,":")}},t:function(t,e,r){let i=Math.trunc(+t/1e3);return D(i,e.length)},T:function(t,e,r){return D(+t,e.length)}};function Aa(t,e=""){let r=t>0?"-":"+",i=Math.abs(t),n=Math.trunc(i/60),o=i%60;return o===0?r+String(n):r+String(n)+e+D(o,2)}function Ia(t,e){return t%60===0?(t>0?"-":"+")+D(Math.abs(t)/60,2):Ee(t,e)}function Ee(t,e=""){let r=t>0?"-":"+",i=Math.abs(t),n=D(Math.trunc(i/60),2),o=D(i%60,2);return r+n+e+o}var Oa=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Da=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ff=(t,e)=>{let r=t.match(/(P+)(p+)?/)||[],i=r[1],n=r[2];if(!n)return Oa(t,e);let o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Oa(i,e)).replace("{{time}}",Da(n,e))},Na={p:Da,P:Ff};var Rf=/^D+$/,Cf=/^Y+$/,Pf=["D","DD","YY","YYYY"];function Fa(t){return Rf.test(t)}function Ra(t){return Cf.test(t)}function Ca(t,e,r){let i=Mf(t,e,r);if(console.warn(i),Pf.includes(t))throw new RangeError(i)}function Mf(t,e,r){let i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function Pa(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Ma(t){return!(!Pa(t)&&typeof t!="number"||isNaN(+I(t)))}var Lf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Wf=/^'([^]*?)'?$/,Uf=/''/g,Gf=/[a-zA-Z]/;function La(t,e,r){let i=te(),n=r?.locale??i.locale??Rt,o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,a=I(t,r?.in);if(!Ma(a))throw new RangeError("Invalid time value");let l=e.match(kf).map(p=>{let m=p[0];if(m==="p"||m==="P"){let f=Na[m];return f(p,n.formatLong)}return p}).join("").match(Lf).map(p=>{if(p==="''")return{isToken:!1,value:"'"};let m=p[0];if(m==="'")return{isToken:!1,value:Bf(p)};if(ji[m])return{isToken:!0,value:p};if(m.match(Gf))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:p}});n.localize.preprocessor&&(l=n.localize.preprocessor(a,l));let c={firstWeekContainsDate:o,weekStartsOn:s,locale:n};return l.map(p=>{if(!p.isToken)return p.value;let m=p.value;(!r?.useAdditionalWeekYearTokens&&Ra(m)||!r?.useAdditionalDayOfYearTokens&&Fa(m))&&Ca(m,e,String(t));let f=ji[m[0]];return f(a,m,n.localize,c)}).join("")}function Bf(t){let e=t.match(Wf);return e?e[1].replace(Uf,"'"):t}function ka(t){return W(t,Date.now())}function Xe(t,e){let r=+I(t)-+I(e);return r<0?-1:r>0?1:r}function Wa(t,e,r){let[i,n]=ee(r?.in,t,e),o=i.getFullYear()-n.getFullYear(),s=i.getMonth()-n.getMonth();return o*12+s}function Ua(t,e){let r=I(t,e?.in);return r.setHours(23,59,59,999),r}function Ga(t,e){let r=I(t,e?.in),i=r.getMonth();return r.setFullYear(r.getFullYear(),i+1,0),r.setHours(23,59,59,999),r}function Ba(t,e){let r=I(t,e?.in);return+Ua(r,e)==+Ga(r,e)}function Ka(t,e,r){let[i,n,o]=ee(r?.in,t,t,e),s=Xe(n,o),a=Math.abs(Wa(n,o));if(a<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);let l=Xe(n,o)===-s;Ba(i)&&a===1&&Xe(i,o)===1&&(l=!1);let c=s*(a-+l);return c===0?0:c}function $a(t){return e=>{let i=(t?Math[t]:Math.trunc)(e);return i===0?0:i}}function Ya(t,e){return+I(t)-+I(e)}function Va(t,e,r){let i=Ya(t,e)/1e3;return $a(r?.roundingMethod)(i)}function Ha(t,e,r){let i=te(),n=r?.locale??i.locale??Rt,o=2520,s=Xe(t,e);if(isNaN(s))throw new RangeError("Invalid time value");let a=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:s}),[l,c]=ee(r?.in,...s>0?[e,t]:[t,e]),p=Va(c,l),m=(He(c)-He(l))/1e3,f=Math.round((p-m)/60),g;if(f<2)return r?.includeSeconds?p<5?n.formatDistance("lessThanXSeconds",5,a):p<10?n.formatDistance("lessThanXSeconds",10,a):p<20?n.formatDistance("lessThanXSeconds",20,a):p<40?n.formatDistance("halfAMinute",0,a):p<60?n.formatDistance("lessThanXMinutes",1,a):n.formatDistance("xMinutes",1,a):f===0?n.formatDistance("lessThanXMinutes",1,a):n.formatDistance("xMinutes",f,a);if(f<45)return n.formatDistance("xMinutes",f,a);if(f<90)return n.formatDistance("aboutXHours",1,a);if(f<Yi){let y=Math.round(f/60);return n.formatDistance("aboutXHours",y,a)}else{if(f<o)return n.formatDistance("xDays",1,a);if(f<Ft){let y=Math.round(f/Yi);return n.formatDistance("xDays",y,a)}else if(f<Ft*2)return g=Math.round(f/Ft),n.formatDistance("aboutXMonths",g,a)}if(g=Ka(c,l),g<12){let y=Math.round(f/Ft);return n.formatDistance("xMonths",y,a)}else{let y=g%12,S=Math.trunc(g/12);return y<3?n.formatDistance("aboutXYears",S,a):y<9?n.formatDistance("overXYears",S,a):n.formatDistance("almostXYears",S+1,a)}}function ja(t,e){return Ha(t,ka(t),e)}function qa(t,e){let r=()=>W(e?.in,NaN),i=e?.additionalDigits??2,n=Vf(t),o;if(n.date){let c=Hf(n.date,i);o=jf(c.restDateString,c.year)}if(!o||isNaN(+o))return r();let s=+o,a=0,l;if(n.time&&(a=qf(n.time),isNaN(a)))return r();if(n.timezone){if(l=zf(n.timezone),isNaN(l))return r()}else{let c=new Date(s+a),p=I(0,e?.in);return p.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),p.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),p}return I(s+a+l,e?.in)}var Tr={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Kf=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,$f=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Yf=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Vf(t){let e={},r=t.split(Tr.dateTimeDelimiter),i;if(r.length>2)return e;if(/:/.test(r[0])?i=r[0]:(e.date=r[0],i=r[1],Tr.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Tr.timeZoneDelimiter)[0],i=t.substr(e.date.length,t.length))),i){let n=Tr.timezone.exec(i);n?(e.time=i.replace(n[1],""),e.timezone=n[1]):e.time=i}return e}function Hf(t,e){let r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(r);if(!i)return{year:NaN,restDateString:""};let n=i[1]?parseInt(i[1]):null,o=i[2]?parseInt(i[2]):null;return{year:o===null?n:o*100,restDateString:t.slice((i[1]||i[2]).length)}}function jf(t,e){if(e===null)return new Date(NaN);let r=t.match(Kf);if(!r)return new Date(NaN);let i=!!r[4],n=Ct(r[1]),o=Ct(r[2])-1,s=Ct(r[3]),a=Ct(r[4]),l=Ct(r[5])-1;if(i)return ed(e,a,l)?Xf(e,a,l):new Date(NaN);{let c=new Date(0);return!Jf(e,o,s)||!Zf(e,n)?new Date(NaN):(c.setUTCFullYear(e,o,Math.max(n,s)),c)}}function Ct(t){return t?parseInt(t):1}function qf(t){let e=t.match($f);if(!e)return NaN;let r=qi(e[1]),i=qi(e[2]),n=qi(e[3]);return td(r,i,n)?r*$i+i*Ki+n*1e3:NaN}function qi(t){return t&&parseFloat(t.replace(",","."))||0}function zf(t){if(t==="Z")return 0;let e=t.match(Yf);if(!e)return 0;let r=e[1]==="+"?-1:1,i=parseInt(e[2]),n=e[3]&&parseInt(e[3])||0;return rd(i,n)?r*(i*$i+n*Ki):NaN}function Xf(t,e,r){let i=new Date(0);i.setUTCFullYear(t,0,4);let n=i.getUTCDay()||7,o=(e-1)*7+r+1-n;return i.setUTCDate(i.getUTCDate()+o),i}var Qf=[31,null,31,30,31,30,31,31,30,31,30,31];function za(t){return t%400===0||t%4===0&&t%100!==0}function Jf(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(Qf[e]||(za(t)?29:28))}function Zf(t,e){return e>=1&&e<=(za(t)?366:365)}function ed(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function td(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function rd(t,e){return e>=0&&e<=59}var id={default:"MMM d 'at' h:mm a",defaultWithDayOfWeek:"EEEE, MMM d 'at' h:mm a",dateTime:"yyyy-MM-dd HH:mm",dateTitle:"MMM d, yyyy 'at' h:mm a",day:"EEE",month:"MMM",monthDay:"MMM d",monthDayYear:"MMM d, yyyy",dayOfYear:"D",logger:"h:mm:ss.SS"};function Ar(t,e,r={}){let{fallback:i,...n}=r;return i&&(t=od(t)?t:i),e==="display"?nd(t,n):La(t,id[e],n)}function nd(t,e){let r=Pt(t),i=new Date;if(da(i,r)<29){let o=Xa(r);return o==="just now"?o:`${o} ago`}return r.getFullYear()!==i.getFullYear()?Ar(r,"monthDayYear",e):Ar(r,"monthDay",e)}function Ir(t){let e=qa(t);return Xa(e)}function Xa(t){let e=ja(t,{includeSeconds:!0});switch(e){case"less than 5 seconds":case"less than 10 seconds":case"less than 20 seconds":return"just now";case"half a minute":case"less than a minute":return"about a minute";case"1 minute":return"a minute";case"about 1 hour":return"about an hour";case"1 day":return"a day";case"about 1 month":return"about a month";case"about 1 year":case"over 1 year":return"about a year"}return e}function Pt(t){return t instanceof Date?t:new Date(typeof t=="string"?t.replace(/ /g,"T"):t)}function od(t){return!!t&&!isNaN(Number(Pt(t)))}function Mt(t=""){return t?.startsWith("eyJ")}function Qa(t,e){if(e.where.type==="all")return!0;let r=e.where.urls;if(!r.length)return!0;let i=r.map(({url:o,match:s})=>({url:o.replace(/^https?:\/\//,""),match:s})).sort((o,s)=>{let a=o.url.split("/").length,l=o.url.split("*").length-1,c=s.url.split("/").length,p=s.url.split("*").length-1;if(l!==p){if(!p)return-1;if(!l)return 1}return a-c}),n=i.every(({match:o})=>o==="hide");for(let{url:o,match:s}of i)zi(t,o)&&(n=s==="show");return n}function zi(t,e){let i=ad(e).replace(/\\\*/gi,".*").replace(/^https?:\/\//,""),n=e.includes(".")||e.includes("*"),o=new RegExp(`${n?"^":""}${i}/?${n?"$":""}`,"ig");try{return!!sd(t).match(o)}catch{return!1}}function sd(t){return t.replace(/^https?:\/\//,"").replace(/\/$/,"")+"/"}function ad(t){return t.replace(/[.?*+\\|{()[^$]/g,"\\$&")}function Lt(t){return!!(t&&"email"in t&&!Xi(t))}function Xi(t){return!!(t&&"frillToken"in t)}function Ja(t){return!!(t&&"ssoToken"in t&&Mt(t.ssoToken))}var Te=xt(Qi());var rl="FRILL_ENV";function U(t,e=""){return typeof process<"u"&&t in process.env?process.env[t]??e:typeof window<"u"&&window[rl]?window[rl][t]??e:e}var re=!1,Or=!0,Ji=!1,Dr="production",il=Or&&Dr==="staging",vd=Or&&Dr==="production",xd="9efbda7c48fd05b155c8e8040b6b480c6228f75d",wd="18212045168",nl=`${xd}.${wd}`;var vb=U("PUBLIC_CDN_URL","").replace(/\/+$/,""),Ed=U("PUBLIC_CDN_ASSETS_URL","").replace(/\/+$/,""),xb=U("PUBLIC_S3_ORIGIN","").replace(/\/+$/,""),wb=`${Ed}/og-image`,K=typeof window>"u",Eb=!K&&navigator&&navigator.appVersion.indexOf("Win")!=-1,Tb=K?!0:navigator&&navigator.userAgent.includes("Macintosh"),Ab=!K&&navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var Zi=U("PUBLIC_BASE_DOMAIN","frill.co");var Ib=U("PUBLIC_APP_GTM_ID"),Ob=U("PUBLIC_RECAPTCHA_SITE_KEY","6Ldv-pYeAAAAAHsbtJj9KbmdfJmJlusp8UBUPNcC"),Db=U("PUBLIC_HELP_SCOUT_ID"),Nb=U("PUBLIC_CUSTOMER_IO_ID"),Fb=U("PUBLIC_USERMAVEN_KEY");var Td="app",Ad="feedback";var Id=`${Td}.${Zi}`,Rb=`${Ad}.${Zi}`;var me="#ef567c";var Cb=U("PUBLIC_CUSTOM_DOMAIN_CNAME","cname.frill.co"),Pb=U("PUBLIC_HOMEPAGE_URL","https://frill.co"),Mb=U("PUBLIC_HOMEPAGE_URL","https://frill.co/pricing"),Lb=U("PUBLIC_FEEDBACK_URL","https://feedback.frill.co"),kb=U("PUBLIC_NOTIFICATIONS_EMAIL","notifications@frill.co"),Od=U("PUBLIC_SUPPORT_EMAIL","support@frill.co"),Wb=`mailto:${Od}`,Nr={HOME:"https://help.frill.co",DEVELOPER_DOCS:"https://developers.frill.co",DEVELOPER_DOCS_FRILL_SCRIPT:"https://developers.frill.co/frill-script",DEVELOPER_DOCS_WIDGETS:"https://developers.frill.co/frill-script/widgets",DEVELOPER_DOCS_SURVEYS:"https://developers.frill.co/frill-script/surveys",DEVELOPER_DOCS_IDENTIFY_USERS:"https://developers.frill.co/frill-script/identifying-users",GETTING_STARTED:"https://help.frill.co/category/62-getting-started",LANGUAGES_TERMINOLOGY:"https://help.frill.co/article/124-languages-terminology",THEMES:"https://help.frill.co/article/123-themes",IMPORT_IDEAS_FROM_CANNY:"https://help.frill.co/article/116-import-ideas-from-canny",SSO:"https://help.frill.co/article/65-sso-implementation",SSO_FRILL:"https://help.frill.co/article/65-sso-implementation",SSO_OKTA:"https://help.frill.co/article/281-okta-sso",SSO_MS_ENTRA_ID:"https://help.frill.co/article/284-microsoft-entra-id-sso",WIDGET:"https://help.frill.co/article/75-adding-the-widget",WIDGET_SSO:"https://help.frill.co/article/97-widget-sso",WIDGET_GTM:"https://help.frill.co/article/225-using-google-tag-manager-to-install-the-frill-script",FRILL_SCRIPT:"https://help.frill.co/article/224-introduction-to-the-frill-script",SURVEYS:"https://help.frill.co/article/224-introduction-to-the-frill-script",WIDGET_LEGACY:"https://help.frill.co/article/235-legacy-widgets",WIDGET_TARGETING:"https://help.frill.co/article/236-survey-and-widget-targeting",DOMAINS:"https://help.frill.co/article/88-setting-up-a-custom-domain",WEBHOOKS:"https://help.frill.co/article/93-webhooks",EMAILS:"https://help.frill.co/article/114-setting-up-a-custom-email-domain",AUTHENTICATION:"https://help.frill.co/article/99-different-types-of-authentication",FEEDBACK_BEACONS:"https://help.frill.co/article/126-feedback-beacons",IDEA_POLLS:"https://help.frill.co/article/159-idea-polls",INTEGRATIONS_INTERCOM:"https://help.frill.co/article/133-intercom-integration",INTEGRATIONS_LINEAR:"https://help.frill.co/article/255-getting-started-with-the-linear-integration",INTEGRATIONS_HELPSCOUT:"https://help.frill.co/article/149-frill-helpscout-integration",INTEGRATIONS_ZAPIER:"https://help.frill.co/article/152-zapier-integration-for-frill",INTEGRATIONS_SLACK:"https://help.frill.co/article/256-getting-started-with-the-slack-integration",PRIORITY_SCORE:"https://help.frill.co/article/145-how-does-prioritization-work",MAINTENANCE_MAR_16:"https://help.frill.co/article/200-scheduled-maintenance-march-16th-2024",CUSTOM_ATTRIBUTES:"https://help.frill.co/article/204-adding-custom-user-attributes-for-segmentation",ANNOUNCEMENT_EMBED:"https://help.frill.co/article/266-announcement-video-embed"};var Ub=U("PUBLIC_SUPERADMIN_URL","https://superadmin.frill.co");var Gb={bytes:1024*1024*2,label:"2Mb"},Bb={bytes:1024*1024*10,label:"10Mb"};var Dd="https://widget.frill.co/v2/container.js",Nd="https://widget.stage.frill.co/v2/container.js";var ol=vd?Dd:Nd;var Wt={IDEA:"f-idea",ANNOUNCEMENT:"f-announcement",SECTION:"f-section",OPEN:"f-open"};var v={HOME:"/",SIGNUP:"/signup",LOGIN:"/login",LOGIN_SSO:"/login/sso",LOGIN_TEAM:"/login/team",LOGIN_ONE_TIME_CODE:"/login/code",FORGOT_PASSWORD:"/forgot-password",RESET_PASSWORD:"/reset-password",TERMS_OF_SERVICE:"/terms-of-service",PRIVACY_POLICY:"/privacy-policy",APPSUMO_SIGNUP:"/appsumo/signup",DASHBOARD:"/dashboard",DASHBOARD_INBOX:"/dashboard/inbox/[tab]",DASHBOARD_INBOX_TAB:"/dashboard/inbox/[tab]",DASHBOARD_INBOX_IDEAS:"/dashboard/inbox/ideas",DASHBOARD_INBOX_COMMENTS:"/dashboard/inbox/comments",DASHBOARD_INBOX_MENTIONS:"/dashboard/inbox/mentions",DASHBOARD_INBOX_USERS:"/dashboard/inbox/users",DASHBOARD_ACTIVITY:"/dashboard/activity",DASHBOARD_MENTIONS:"/dashboard/mentions",DASHBOARD_USERS:"/dashboard/users",DASHBOARD_VIEW_USER:"/dashboard/users/[id]",DASHBOARD_SEGMENT:"/dashboard/users/segment/[segment]",DASHBOARD_SEGMENT_VIEW_USER:"/dashboard/users/segment/[segment]/[id]",DASHBOARD_PRIORITY_MATRIX:"/dashboard/prioritization-matrix",DASHBOARD_WIDGETS:"/dashboard/widgets",DASHBOARD_WIDGET_VIEW:"/dashboard/widgets/[widgetId]",DASHBOARD_WIDGET_EDIT:"/dashboard/widgets/[widgetId]/edit",DASHBOARD_SURVEYS:"/dashboard/surveys",DASHBOARD_SURVEYS_NEW:"/dashboard/surveys/[containerId]/new",DASHBOARD_SURVEY_VIEW:"/dashboard/surveys/[surveyId]",DASHBOARD_SURVEY_RESPONSES:"/dashboard/surveys/[surveyId]/responses",DASHBOARD_SURVEY_EDIT:"/dashboard/surveys/[surveyId]/edit",CHOOSE_COMPANY:"/company",CREATE_COMPANY:"/company/new",CREATE_COMPANY_ONBOARDING:"/company/new/[step]",SWITCH_COMPANY:"/company/switch",VIEW_IDEA:"/board/[ideaSlug]",VIEW_BOARD:"/b/[boardId]/[boardSlug]",VIEW_BOARD_IDEA:"/b/[boardId]/[boardSlug]/[ideaSlug]",BOARD_NEW_IDEA:"/b/[boardId]/[boardSlug]/idea/new",VIEW_ROADMAP:"/roadmap",VIEW_ROADMAP_IDEA:"/roadmap/[ideaSlug]",ROADMAP_NEW_IDEA:"/roadmap/idea/new",VIEW_ANNOUNCEMENTS:"/announcements",NEW_ANNOUNCEMENT:"/announcements/new",EDIT_ANNOUNCEMENT:"/announcements/edit/[announcementSlug]",VIEW_ANNOUNCEMENT:"/announcements/[announcementSlug]",SETTINGS:"/settings",SETTINGS_PROFILE:"/settings/profile",SETTINGS_MY_CONTENT:"/settings/my-content",SETTINGS_MY_CONTENT_IDEAS:"/settings/my-content/ideas",SETTINGS_MY_CONTENT_COMMENTS:"/settings/my-content/comments",SETTINGS_MY_CONTENT_VOTES:"/settings/my-content/votes",SETTINGS_NOTIFICATIONS:"/settings/notifications",SETTINGS_UNSUBSCRIBE:"/settings/unsubscribe",SETTINGS_COMPANY:"/settings/company",SETTINGS_DESIGN_SYSTEM:"/settings/design-system",SETTINGS_COMPANY_AUTHENTICATION:"/settings/company/authentication",SETTINGS_COMPANY_BOARDS:"/settings/company/boards",SETTINGS_COMPANY_TEAM:"/settings/company/team",SETTINGS_COMPANY_USERS:"/settings/company/users",SETTINGS_COMPANY_BILLING:"/settings/company/billing",SETTINGS_COMPANY_UPGRADE:"/settings/company/upgrade",SETTINGS_COMPANY_TOPICS:"/settings/company/topics",SETTINGS_COMPANY_STATUSES:"/settings/company/statuses",SETTINGS_COMPANY_CATEGORIES:"/settings/company/categories",SETTINGS_COMPANY_MISCELLANEOUS:"/settings/company/miscellaneous",SETTINGS_COMPANY_SSO:"/settings/company/sso",SETTINGS_COMPANY_SSO_FRILL:"/settings/company/sso/frill",SETTINGS_COMPANY_SSO_OKTA:"/settings/company/sso/okta",SETTINGS_COMPANY_SSO_ENTRA:"/settings/company/sso/microsoft-entra-id",SETTINGS_COMPANY_EMAILS:"/settings/company/emails",SETTINGS_COMPANY_EMAILS_TEMPLATES:"/settings/company/emails/templates",SETTINGS_COMPANY_EMAILS_TEMPLATE_EDIT:"/settings/company/emails/templates/[id]",SETTINGS_COMPANY_EMAILS_BRANDING:"/settings/company/emails/branding",SETTINGS_COMPANY_EMAILS_CUSTOM_EMAIL:"/settings/company/emails/custom-email",SETTINGS_COMPANY_LANGUAGES:"/settings/company/languages",SETTINGS_COMPANY_LANGUAGES_GROUP:"/settings/company/languages/[language]/[group]",SETTINGS_COMPANY_CUSTOM_DOMAINS:"/settings/company/custom-domains",SETTINGS_COMPANY_PRIORITIZATION:"/settings/company/prioritization",SETTINGS_COMPANY_THEME:"/settings/company/theme",SETTINGS_COMPANY_WIDGET_LEGACY:"/settings/company/widget/legacy",SETTINGS_COMPANY_PRIVACY:"/settings/company/privacy",SETTINGS_COMPANY_WHITE_LABEL:"/settings/company/white-label",SETTINGS_COMPANY_WEBHOOKS:"/settings/company/webhooks",SETTINGS_COMPANY_API:"/settings/company/api",SETTINGS_COMPANY_INTEGRATIONS:"/settings/company/integrations",SETTINGS_COMPANY_INTEGRATIONS_SLACK:"/settings/company/integrations/slack",SETTINGS_COMPANY_INTEGRATIONS_TRELLO:"/settings/company/integrations/trello",SETTINGS_COMPANY_INTEGRATIONS_JIRA:"/settings/company/integrations/jira",SETTINGS_COMPANY_INTEGRATIONS_OKTA:"/settings/company/integrations/okta",SETTINGS_COMPANY_INTEGRATIONS_PABBLY:"/settings/company/integrations/pabbly",SETTINGS_COMPANY_INTEGRATIONS_INTEGRATELY:"/settings/company/integrations/integrately",SETTINGS_COMPANY_INTEGRATIONS_LINEAR:"/settings/company/integrations/linear",SETTINGS_COMPANY_INTEGRATIONS_ZAPIER:"/settings/company/integrations/zapier",SETTINGS_COMPANY_INTEGRATIONS_ZENDESK:"/settings/company/integrations/zendesk",SETTINGS_COMPANY_INTEGRATIONS_INTERCOM:"/settings/company/integrations/intercom",SETTINGS_COMPANY_INTEGRATIONS_HELPSCOUT:"/settings/company/integrations/helpscout",SETTINGS_COMPANY_INTEGRATIONS_ENTRA:"/settings/company/integrations/microsoft-entra-id",SETTINGS_COMPANY_FRILL_SCRIPT:"/settings/company/frill-script",INTEGRATIONS_SLACK:"/integrations/slack",INTEGRATIONS_TRELLO:"/integrations/trello",INTEGRATIONS_JIRA:"/integrations/jira",INTEGRATIONS_ZENDESK:"/integrations/zendesk",INTEGRATIONS_INTERCOM:"/integrations/intercom",INTEGRATIONS_LINEAR:"/integrations/linear",REDIRECTS_SSO:"/redirects/sso"};var Ut="v2",Kb=typeof window<"u"&&window.top!==window,sl=3e3,Fd=il?"widget.stage":"widget",en=`https://${Fd}.frill.co`,Je=re||Ji?"container.css":`${en}/${Ut}/container.css`,Rd=`/${Ut}/survey`,Cd=`${en}${Rd}`,Pd=`https://localhost:${sl}`,al=re||Ji?Pd:Cd;var ll="Frill_Frame",cl="Frill_Frame",ul="Frill_Styles",Md=`/${Ut}/app`,Ld=`${en}${Md}`,kd=`https://localhost:${sl}`,Fr=re||Ji?kd:Ld;var Gt="data-frill-widget";var he="data-frill-widget-loaded",Rr="Frill_Frame",pl="Frill_Frame",Cr="Frill_Styles",tn="Frill_Badge",ge="Frill_Notification",Ze="Frill_Trigger",se="Frill_Trigger--unread",et="Frill_View",q={HOME:"/",ANNOUNCEMENTS:"/announcements",VIEW_ANNOUNCEMENT:"/announcements/[announcementSlug]",ANNOUNCEMENTS_IDEA:"/announcements/idea/[ideaSlug]",ROADMAP:"/roadmap",ROADMAP_IDEA:"/roadmap/[ideaSlug]",IDEAS:"/ideas",IDEA_IDEA:"/ideas/[ideaSlug]",IDEAS_CREATE_IDEA:"/ideas/idea/new",CREATE_IDEA:"/create-idea",VIEW_IDEA:"/create-idea/[ideaSlug]",TERMS_OF_SERVICE:"/terms-of-service",PRIVACY_POLICY:"/privacy-policy"},fl="frill-widget",ye={LAUNCHER_OPEN:"Open Feedback Widget",LAUNCHER_CLOSE:"Close Feedback Widget"},$b=U("PUBLIC_API_BASE_URI","https://api.frill.co");var rn="/api",tt={WIDGET_SETTINGS:"/v2/[key]/settings/",SURVEY_SETTINGS:"/v2/surveys/[key]",IDENTIFY:"/v2/container/[key]/identify",CONTAINER_SETTINGS:"/v2/container/[key]",UPDATE_USER_META:"/v2/auth/user-meta",ANNOUNCEMENTS:"/v2/[key]/announcements/",ROADMAP:"/v2/[key]/roadmap/",IDEAS:"/v2/[key]/ideas/"},Wd="https://widget.frill.co",Ud="https://widget.stage.frill.co",dl=il||re?Ud:Wd;var Yb=[{value:"usd",label:"USD"},{value:"aud",label:"AUD"}];function rt(t){return t==="__proto__"}function ml(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}function Pr(t){return typeof t=="string"||typeof t=="symbol"?t:Object.is(t?.valueOf?.(),-0)?"-0":String(t)}function Mr(t){let e=[],r=t.length;if(r===0)return e;let i=0,n="",o="",s=!1;for(t.charCodeAt(0)===46&&(e.push(""),i++);i<r;){let a=t[i];o?a==="\\"&&i+1<r?(i++,n+=t[i]):a===o?o="":n+=a:s?a==='"'||a==="'"?o=a:a==="]"?(s=!1,e.push(n),n=""):n+=a:a==="["?(s=!0,n&&(e.push(n),n="")):a==="."?n&&(e.push(n),n=""):n+=a,i++}return n&&e.push(n),e}function Bt(t,e,r){if(t==null)return r;switch(typeof e){case"string":{if(rt(e))return r;let i=t[e];return i===void 0?ml(e)?Bt(t,Mr(e),r):r:i}case"number":case"symbol":{typeof e=="number"&&(e=Pr(e));let i=t[e];return i===void 0?r:i}default:{if(Array.isArray(e))return Gd(t,e,r);if(Object.is(e?.valueOf(),-0)?e="-0":e=String(e),rt(e))return r;let i=t[e];return i===void 0?r:i}}}function Gd(t,e,r){if(e.length===0)return r;let i=t;for(let n=0;n<e.length;n++){if(i==null||rt(e[n]))return r;i=i[e[n]]}return i===void 0?r:i}function nn(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function hl(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}var Bd=/^(?:0|[1-9]\d*)$/;function gl(t,e=Number.MAX_SAFE_INTEGER){switch(typeof t){case"number":return Number.isInteger(t)&&t>=0&&t<e;case"symbol":return!1;case"string":return Bd.test(t)}}function yl(t){return typeof t=="symbol"||t instanceof Symbol}var Kd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$d=/^\w*$/;function Sl(t,e){return Array.isArray(t)?!1:typeof t=="number"||typeof t=="boolean"||t==null||yl(t)?!0:typeof t=="string"&&($d.test(t)||!Kd.test(t))||e!=null&&Object.hasOwn(e,t)}var bl=(t,e,r)=>{let i=t[e];(!(Object.hasOwn(t,e)&&hl(i,r))||r===void 0&&!(e in t))&&(t[e]=r)};function _l(t,e,r,i){if(t==null&&!nn(t))return t;let n=Sl(e,t)?[e]:Array.isArray(e)?e:typeof e=="string"?Mr(e):[e],o=t;for(let s=0;s<n.length&&o!=null;s++){let a=Pr(n[s]);if(rt(a))continue;let l;if(s===n.length-1)l=r(o[a]);else{let c=o[a],p=i?.(c,a,t);l=p!==void 0?p:nn(c)?c:gl(n[s+1])?[]:{}}bl(o,a,l),o=o[a]}return t}function vl(t,e,{signal:r,edges:i}={}){let n,o=null,s=i!=null&&i.includes("leading"),a=i==null||i.includes("trailing"),l=()=>{o!==null&&(t.apply(n,o),n=void 0,o=null)},c=()=>{a&&l(),g()},p=null,m=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,c()},e)},f=()=>{p!==null&&(clearTimeout(p),p=null)},g=()=>{f(),n=void 0,o=null},y=()=>{l()},S=function(...x){if(r?.aborted)return;n=this,o=x;let E=p==null;m(),s&&E&&l()};return S.schedule=m,S.cancel=g,S.flush=y,r?.addEventListener("abort",g,{once:!0}),S}function xl(t,e=0,r={}){typeof r!="object"&&(r={});let{leading:i=!1,trailing:n=!0,maxWait:o}=r,s=Array(2);i&&(s[0]="leading"),n&&(s[1]="trailing");let a,l=null,c=vl(function(...f){a=t.apply(this,f),l=null},e,{edges:s}),p=function(...f){return o!=null&&(l===null&&(l=Date.now()),Date.now()-l>=o)?(a=t.apply(this,f),l=Date.now(),c.cancel(),c.schedule(),a):(c.apply(this,f),a)},m=()=>(c.flush(),a);return p.cancel=c.cancel,p.flush=m,p}function Lr(t,e=0,r={}){let{leading:i=!0,trailing:n=!0}=r;return xl(t,e,{leading:i,maxWait:e,trailing:n})}function kr(t,e,r,i){let n;return typeof i=="function"?n=i:n=()=>{},_l(t,e,()=>r,n)}var Kt=xt(El());function z(t){if(Array.isArray(t))return t.map(z);if(t&&typeof t=="object"){let e={};for(let[r,i]of Object.entries(t))e[r]=i&&typeof i=="object"?z(i):i;return e}return t}function $t(t,e){let r=typeof e=="number"?e:e.length,[i,n]=typeof t=="string"?[t,`${t}s`]:t;return r===1?i:n}function Tl(t){return t.length?`${t[0].toUpperCase()}${t.slice(1)}`:t}var $=xt(Qi());var Al={popover:{type:"popover",offsetSkidding:0,offsetDistance:20,isFixedPosition:!0,placement:"top-end",width:"410px",height:"600px"},modal:{type:"modal",width:"640px",height:"500px"},sidebar:{type:"sidebar",position:"right",width:"450px"},embed:{type:"embed"}},Vd={where:{type:"all",urls:[]},when:{action:"enter",delay:0}},Il={floating:{type:"floating",color:"light",backgroundColor:me,position:"bottom-right",icon:"bolt"},tab:{type:"tab",color:"light",backgroundColor:me,position:"center-right",text:"What's new"},selector:{type:"selector",selector:""},null:{type:"null"}};function Ol(t){return{sections:{order:["ideas","roadmap","announcements"],announcements:{active:!0,display:"embed",title:{[t]:"Announcements"},reactions:"inherit",comments:"inherit",disableAnnouncementLinks:!1,subscribeButton:"inherit",layout:"full",ideas:{open:"embed"}},ideas:{active:!0,display:"embed",title:{[t]:"Ideas"},sort:"trending",ideas:{open:"embed"},create:{label:{[t]:""},hideSuggestions:!0}},roadmap:{active:!0,display:"embed",layout:"horizontal",title:{[t]:"Roadmap"},ideas:{open:"embed",excerpt:"inherit"}}},launcher:z(Il.tab),view:z(Al.sidebar),targeting:z(Vd),badge:{type:"count"},advanced:{openLinksInNewWindow:!0,hidePoweredByFrill:!1},appearance:{responsiveMediaQuery:"(min-width: 481px)",showLogo:!0,theme:{idx:""},headerBackgroundColor:"#f9fafb",headerTextColor:"dark",title:{[t]:""},description:{[t]:"Suggest a feature, read through our Roadmap and check out our latest feature releases."}},navigation:{reopenOnStartPage:!1}}}var Hd={arrayMerge:(t,e)=>Array.from(new Set([...e,...t]))};function Wr(t,e,{mergeOptions:r=Hd,language:i}){let{advanced:n={},appearance:o={},badge:s={},launcher:a={},navigation:l={},sections:c={},targeting:p={},view:m={}}=e,f=t||Ol(i),g=a?.type||f.launcher.type,y=m?.type||f.view.type,S=(0,$.default)(Il[g],f.launcher),x=(0,$.default)(Al[y],f.view);return{advanced:(0,$.default)(f.advanced,n,r),appearance:(0,$.default)(f.appearance,o,r),badge:(0,$.default)(f.badge,s,r),launcher:(0,$.default)(S,a,r),navigation:(0,$.default)(f.navigation,Object.assign({},l),r),sections:(0,$.default)(f.sections,c,r),targeting:(0,$.default)(f.targeting,p,r),view:(0,$.default)(x,m,r)}}function jd(t,e){return typeof t.sections.ideas.title=="string"&&(t.sections.ideas.title={[e]:t.sections.ideas.title}),typeof t.sections.ideas.create.label=="string"&&(t.sections.ideas.create.label={[e]:t.sections.ideas.create.label}),typeof t.sections.roadmap.title=="string"&&(t.sections.roadmap.title={[e]:t.sections.roadmap.title}),typeof t.sections.announcements.title=="string"&&(t.sections.announcements.title={[e]:t.sections.announcements.title}),typeof t.appearance.title=="string"&&(t.appearance.title={[e]:t.appearance.title}),typeof t.appearance.description=="string"&&(t.appearance.description={[e]:t.appearance.description}),t}function on(t,e){let r=Ol(e);return r.sections=(0,$.default)(r.sections,{announcements:{reactions:"inherit",ideas:{open:"link"}}}),r.appearance.description={[e]:""},r.appearance.showLogo=!1,Wr(r,jd(z(t),e),{language:e})}var U_=`(function(t,r){function s(){var a=r.getElementsByTagName("script")[0],e=r.createElement("script");e.type="text/javascript",e.async=!0,e.src="${ol}",a.parentNode.insertBefore(e,a)}if(!t.Frill){var o=0,i={};t.Frill=function(e,p){var n,l=o++,c=new Promise(function(v,d){i[l]={params:[e,p],resolve:function(f){n=f,v(f)},reject:d}});return c.destroy=function(){delete i[l],n&&n.destroy()},c},t.Frill.q=i;}r.readyState==="complete"||r.readyState==="interactive"?s():r.addEventListener("DOMContentLoaded",s)})(window,document);`;function Dl(t){return`${fl}:${Dr}:${t}`}var K_={"weeks-4":"(from prev 4 weeks)","month-to-date":"(from prev month)",all:""};var Nl=[{value:"enter",label:"When the user lands on the page"},{value:"exit",label:"When a user leaves the page"},{value:"api",label:"When I trigger it with code"},{value:"scroll",label:"When the user has scrolled the page (soon)",disabled:!0}];var qd={where:{type:"all",urls:[]},when:{action:"enter",delay:0},showAfter:{active:!1,value:7,unit:"day"}},zd={afterResponse:{active:!1,value:7,unit:"day"},afterClose:{active:!1,value:7,unit:"day"},oncePerVisit:!0,preventSurveyAfterResponse:!1},Xd={hideFromGuests:!1};function Fl(t,e){let r={audience:z(Xd),frequency:z(zd),targeting:z(qd),advanced:{openLinksInNewWindow:!0,hidePoweredByFrill:!1},appearance:{theme:{idx:""},accentColor:"",position:"bottom-left"}};switch(t){case"nps":return{...r,title:"How likely are you to recommend Frill?",translations:{[e]:{title:"How likely are you to recommend Frill?"}},feedbackForm:"optional"};case"csat":return{...r,title:"How happy are you with Frill?",translations:{[e]:{title:"How happy are you with Frill?"}},feedbackForm:"optional",rating:"custom"};case"idea-poll":return{...r,title:"What should we build next?",translations:{[e]:{title:"What should we build next?"}},showIdeaDescription:!0,showNoneOption:!0};case"open-feedback":return{...r,title:"How can we improve this?",translations:{[e]:{title:"How can we improve this?"}}};case"poll":return{...r,options:[{label:{[e]:"Lois Griffin"},value:1},{label:{[e]:"Peter Griffin"},value:2},{label:{[e]:"Stewie Griffin"},value:3},{label:{[e]:"Someone else"},value:4}],title:"Who is your favourite Family Guy character?",translations:{[e]:{title:"Who is your favourite Family Guy character?"}},feedbackForm:""}}}var Qd={arrayMerge:(t,e)=>Array.from(new Set([...e,...t]))};function Yt(t,e,r=Qd){let{advanced:i={},appearance:n={},audience:o={},frequency:s={},targeting:a={},translations:l={},...c}=e;return{...t,advanced:(0,Te.default)(t.advanced,i,r),appearance:(0,Te.default)(t.appearance,n,r),translations:(0,Te.default)(t.translations||{},Object.assign({},l),r),audience:(0,Te.default)(t.audience,o,r),frequency:(0,Te.default)(t.frequency,s,r),targeting:(0,Te.default)(t.targeting,a,r),...c}}var Ur=xt(Ll());var Zd=[v.SIGNUP,v.LOGIN,v.LOGIN_SSO,v.LOGIN_ONE_TIME_CODE,v.FORGOT_PASSWORD,v.RESET_PASSWORD],q_={[v.DASHBOARD_SURVEYS]:"settings-survey",[v.DASHBOARD_SURVEY_EDIT]:"settings-survey-edit",[v.DASHBOARD_WIDGETS]:"settings-widget",[v.DASHBOARD_WIDGET_EDIT]:"settings-widget-edit",[v.SETTINGS]:"settings",[v.SETTINGS_PROFILE]:"settings-profile",[v.SETTINGS_NOTIFICATIONS]:"settings-notifications",[v.SETTINGS_UNSUBSCRIBE]:"settings-unsubscribe",[v.SETTINGS_COMPANY]:"settings-company",[v.SETTINGS_COMPANY_API]:"settings-api",[v.SETTINGS_COMPANY_AUTHENTICATION]:"settings-authentication",[v.SETTINGS_COMPANY_BOARDS]:"settings-boards",[v.SETTINGS_COMPANY_TEAM]:"settings-team",[v.SETTINGS_COMPANY_USERS]:"settings-users",[v.SETTINGS_COMPANY_BILLING]:"settings-billing",[v.SETTINGS_COMPANY_UPGRADE]:"settings-upgrade",[v.SETTINGS_COMPANY_TOPICS]:"settings-topics",[v.SETTINGS_COMPANY_STATUSES]:"settings-statuses",[v.SETTINGS_COMPANY_CATEGORIES]:"settings-categories",[v.SETTINGS_COMPANY_MISCELLANEOUS]:"settings-miscellaneous",[v.SETTINGS_COMPANY_SSO]:"settings-sso",[v.SETTINGS_COMPANY_SSO_FRILL]:"settings-sso",[v.SETTINGS_COMPANY_SSO_OKTA]:"settings-sso",[v.SETTINGS_COMPANY_EMAILS]:"settings-emails",[v.SETTINGS_COMPANY_EMAILS_TEMPLATES]:"settings-emails-templates",[v.SETTINGS_COMPANY_EMAILS_TEMPLATE_EDIT]:"settings-emails-template-edit",[v.SETTINGS_COMPANY_EMAILS_BRANDING]:"settings-emails-branding",[v.SETTINGS_COMPANY_EMAILS_CUSTOM_EMAIL]:"settings-emails-custom-email",[v.SETTINGS_COMPANY_LANGUAGES]:"settings-terminology",[v.SETTINGS_COMPANY_LANGUAGES_GROUP]:"settings-terminology-group",[v.SETTINGS_COMPANY_CUSTOM_DOMAINS]:"settings-custom-domains",[v.SETTINGS_COMPANY_THEME]:"settings-theme",[v.SETTINGS_COMPANY_PRIVACY]:"settings-privacy",[v.SETTINGS_COMPANY_WHITE_LABEL]:"settings-white-label",[v.SETTINGS_COMPANY_WEBHOOKS]:"settings-webhooks",[v.SETTINGS_COMPANY_INTEGRATIONS]:"settings-integrations",[v.SETTINGS_COMPANY_INTEGRATIONS_SLACK]:"settings-integrations-slack",[v.SETTINGS_COMPANY_INTEGRATIONS_TRELLO]:"settings-integrations-trello",[v.SETTINGS_COMPANY_INTEGRATIONS_JIRA]:"settings-integrations-jira",[v.SETTINGS_COMPANY_INTEGRATIONS_PABBLY]:"settings-integrations-pabbly",[v.SETTINGS_COMPANY_INTEGRATIONS_INTEGRATELY]:"settings-integrations-integrately",[v.SETTINGS_COMPANY_INTEGRATIONS_HELPSCOUT]:"settings-integrations-helpscout",[v.SETTINGS_COMPANY_INTEGRATIONS_ZENDESK]:"settings-integrations-zendesk",[v.SETTINGS_COMPANY_INTEGRATIONS_INTERCOM]:"settings-integrations-intercom"},em=[...Zd,v.TERMS_OF_SERVICE,v.PRIVACY_POLICY,v.SETTINGS_UNSUBSCRIBE],z_=[...em,v.SETTINGS_COMPANY_BILLING,v.SETTINGS_COMPANY_UPGRADE,v.SETTINGS_NOTIFICATIONS,v.SETTINGS_PROFILE,v.SETTINGS_UNSUBSCRIBE];function tm(t){return Array.isArray(t)?t.join(","):t?t.toString():""}function it(t=""){return(0,Ur.parse)(t.replace("?",""))}function Ae(t={}){return(0,Ur.stringify)(Object.entries(t).reduce((e,[r,i])=>(typeof i<"u"&&i!==null&&(e[r]=i),e),{}))}function Ie(t,e={}){return Object.keys(e).reduce((r,i)=>{let n=tm(e[i]);return r.replace(`[${i}]`,n||"").replace(`[[...${i}]]`,n||"")},t)}function Oe(t,e={}){let r=Ae(e),i=t.includes("?")?"&":"?";return r?`${t}${i}${r}`:t}function kl(t){if(!t)return!1;let e=/^(?:\w+:)?\/\/(\S+)$/,r=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,i=/^[^\s\.]+\.\S{2,}$/,n=t.match(e);if(!n)return!1;let o=n[1];return o?!!(r.test(o)||i.test(o)):!1}var jt=console,sn={timestamp:"gray",disable:"gray",default:"gray",debug:"gray",log:"inherit",info:"inherit",warn:"#F1B109",error:"#F20404"},nt={debug:0,log:1,info:2,warn:3,error:4,disable:5};function Wl(){if(!Or)return nt.debug;if(K)return nt.disable;let{logLevel:t}=it(window.location.search.replace("?",""));return nt[typeof t=="string"?t:"disable"]??nt.disable}function Ul(t){return[`color: ${sn.default}; font-weight: lighter;`,`color: ${sn[t]}; font-weight: bold;`,`color: ${sn.timestamp}; font-weight: lighter;`]}function Gl(t,e){let r=Ar(new Date,"logger");return`%c ${t} %c${e} %c@ ${r}`}function rm(t=[]){let e,r={};t.forEach((i,n)=>{i&&i.stack&&typeof i.message=="string"?e=i:r[`context-${n}`]=i})}var an=class{constructor(e,r){this.type=e;this._level=Wl();this.debug=(...e)=>{this.console("debug",this.type,...e)};this.log=(...e)=>{this.console("log",this.type,...e)};this.info=(...e)=>{this.console("info",this.type,...e)};this.error=(...e)=>{this.console("error",this.type,...e),rm(e)};this.warn=(...e)=>{this.console("warn",this.type,...e)};r&&(this.level=r)}set level(e){this._level=nt[e]??Wl()}console(e,r,...i){if(this._level>nt[e]||K)return;let[n,...o]=i,s=e==="log"||e==="debug"||e==="info";if(s&&(!o||o.length===0)&&typeof n=="string"){jt[e](Gl(r,n),...Ul(e));return}let a=s&&typeof n=="string",l=Gl(r,a?n:e);jt.groupCollapsed(l,...Ul(e)),a||jt[e](n),typeof o<"u"&&o.length>0&&jt[e](...o),jt.groupEnd()}};function ae(t,e){return new an(t,e)}var ev=ae("common");var De=ae("Frill","log");function P(...t){console.warn("%c Frill.co","font-weight: bold;",t.join(`

`),`

See our documentation for information: ${Nr.DEVELOPER_DOCS_FRILL_SCRIPT}`)}function qt(t){return P(`Calling ${t} without first calling Frill('container', { key: 'YOUR-KEY-HERE' }) can lead to unexpected results with user identification.`,"If you want to load Widgets and Surveys manually, you should still load your container with autoLoad disabled, e.g. Frill('container', { autoLoad: false, key: 'YOUR-KEY-HERE' })")}var C=class extends Error{constructor(r,i=!0){super(r);this.warn=i;this.isKnown=!0}};function le(t){return!!(t?.message&&t?.isKnown)}function Bl(t,e){let r=t.targeting,i=[],n=r.where.type==="all"?"Show on all pages":"Show on some pages:";if(i.push(n),r.where.type==="selected"){let s=r.where.urls.map(({url:a,match:l})=>`  - ${Tl(l)} on "${a}" ${zi(window.location.href,a)?"\u2705":"\u274C"}`);i.push(...s)}i.push("");let o=Nl.find(s=>s.value===r.when.action);if(i.push(o?.label||"Unknown show when trigger!"),t.type==="survey"&&e.identity?.userMeta){let s=t.entity.idx,a=e.identity.userMeta.sdk?.surveys?.[s];i.push(""),i.push(a?.lastInteraction?`${a.lastInteraction.type==="response"?"Responsed":"Dismissed"} ${Ir(a.lastInteraction.date)} ago (session #${a.lastInteraction.session})`:"No interactions with survey")}return i.join(`
`)}function Kl(t){if(t)return`First identified ${Ir(t.identifiedAt)} ago
Last identified ${Ir(t.lastIdentifiedAt)} ago
${t.sessionCount} ${$t("session",t.sessionCount)}`}var im=["en","zh","es","fr","de","ja","pt","ru","it","ko","ar","nl","tr","pl","sv","vi","th","he","id","da","no","fi","cs","el","hu","ro","sk","bg","uk","hi","ms","ta","bn","pa","ur","fa","tl","my","am","sw","km"];function $l(t){return im.includes(t)}function nm(t){if(t&&typeof t=="string"){let e=t.slice(0,2);return $l(e)?e:void 0}}function Yl(){if(K)return;let{lang:t}=it(window.location.search);return $l(t)?t:nm(navigator.language)}var ot=class{constructor(e,r){this.key=e;this.options=r;this.cache={};this.widget=async()=>{try{let{hostname:e}=window.location;return await this.get(Oe(tt.WIDGET_SETTINGS,{host:e}),{authorize:!1})}catch{throw new C("Failed to load widget settings")}};this.survey=async()=>{try{let{hostname:e}=window.location;return await this.get(Oe(tt.SURVEY_SETTINGS,{host:e}),{authorize:!1})}catch(e){throw le(e)?e:new C("Failed to load survey settings")}};this.container=async()=>{try{let{hostname:e}=window.location;return await this.get(Oe(tt.CONTAINER_SETTINGS,{host:e}),{authorize:!0})}catch{throw new C("Failed to load container (incorrect key)")}};this.identify=async e=>{try{let{hostname:r}=window.location,i={host:r};return Xi(e)&&(i.frillToken=e.frillRefreshToken),Ja(e)&&(i.ssoToken=e.ssoToken),Lt(e)&&(i.email=e.email,i.name=e.name,e.attributes&&(i.attributes=JSON.stringify(e.attributes)),e.companies&&(i.companies=JSON.stringify(e.companies))),await this.get(Oe(tt.IDENTIFY,i),{authorize:!1})}catch{throw new C("Failed to identify")}};this.meta=async e=>this.post(tt.UPDATE_USER_META,e)}get base(){return dl}get authHeaders(){if(this.options.frill.identity?.tokens)return{Authorization:`Bearer ${this.options.frill.identity.tokens.frillToken}`,"Frill-Host":this.options.frill.identity.frillHost}}get language(){return this.options.language||Yl()}async get(e,{authorize:r=!0}){let i=Oe(`${this.base}${rn}${e}`.replace("[key]",this.key),{lang:this.language}),n=r?this.authHeaders:void 0,o=n?`${i}:${n.Authorization}`:i;if(!this.cache[o]){let s=await fetch(i,{headers:n});if(!s.ok){if(s.status===418){let l=await s.json();throw new C(l.message,!1)}throw new Error("Bad request")}let a=await s.json();if(this.isErrorResponse(a))throw new C(a.message||"Something went wrong");return this.cache[o]=a,a}return this.cache[o]}async post(e,r){let i=Oe(`${this.base}${rn}${e}`.replace("[key]",this.key),{lang:this.language});return(await fetch(i,{body:JSON.stringify(r),method:"POST",headers:this.authHeaders})).json()}isErrorResponse(e){return e&&typeof e=="object"&&e.error===!0}};var Gr=class{constructor(e,r,i){this.key=e;this.name=r;this.actions=i;this.i=0;this.promises=new Map;this.logger=ae(this.name);this.messenger={send:e=>{parent.postMessage(e,"*")}};this.client=new Proxy({},{get:(e,r)=>(...i)=>this.request({name:r,params:i})});this.destroy=()=>{window.removeEventListener("message",this.handleMessage,!1)};this.handleMessage=e=>{if(!(e?.data?.type!=="FRILL"||e?.data?.sender===this.name||e?.data?.key!==this.key)){if(this.logger.debug("receive",e),"requestId"in e.data){let{requestId:r,payload:i}=e.data;if(this.promises.has(r)){let[n,o]=this.promises.get(r);i&&"__error"in i?o(new Error(i.__error)):n(i)}return}this.run(e.data)}};K||this.create()}create(){this.logger.debug("listen"),window.addEventListener("message",this.handleMessage,!1)}async request(e){return new Promise((r,i)=>{let n=this.send(e);this.promises.set(n.id,[r,i])})}send(e){if(!this.messenger)return;let r={type:"FRILL",key:this.key,sender:this.name,id:this.i++,message:e};return this.messenger.send(r),this.logger.debug("send",r),r}respond(e,r){if(!this.messenger)return;let i={type:"FRILL",key:this.key,sender:this.name,id:this.i++,payload:r,requestId:e.id};return this.messenger.send(i),this.logger.debug("respond",i),i}async run(e){let{name:r,params:i}=e.message;try{if(r in this.actions){let n=await this.actions[r](...i);this.respond(e,n);return}}catch(n){this.respond(e,{__error:n.message});return}this.respond(e,{__error:`Unsupported action ${r.toString()}`})}};var Ne=class extends Gr{constructor(){super(...arguments);this._isReady=!1;this._queue=[];this.ready=()=>{this._isReady=!0};this.flush=()=>{let r=this._queue.pop();for(;r;)this.messenger.send(r),r=this._queue.pop()};this.messenger={send:r=>{let i="requestId"in r;if(!this._isReady&&!i){this._queue.push(r);return}this._frame?.contentWindow&&this._frame.contentWindow.postMessage(r,"*")}}}set frame(r){this._frame=r}},Br=class extends Ne{};var zt=class{constructor(){this.i=0;this.channels={};this.logger=ae("events");this.log=!1;this.emit=(e,...r)=>{let i=this.channels[e],[n]=r;if(this.log&&this.logger.log("emit",e,n),!!i)for(let o of Array.from(i.values()))try{o(n)}catch(s){console.error(s)}}}on(e,r){let i=this.i++;this.channels[e]||(this.channels[e]=new Map);let n=this.channels[e];return n.set(i,r),()=>{n.delete(i)}}clear(){this.channels={}}};function Kr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)t[i]=r[i]}return t}var om={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function ln(t,e){function r(n,o,s){if(!(typeof document>"u")){s=Kr({},e,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var l in s)s[l]&&(a+="; "+l,s[l]!==!0&&(a+="="+s[l].split(";")[0]));return document.cookie=n+"="+t.write(o,n)+a}}function i(n){if(!(typeof document>"u"||arguments.length&&!n)){for(var o=document.cookie?document.cookie.split("; "):[],s={},a=0;a<o.length;a++){var l=o[a].split("="),c=l.slice(1).join("=");try{var p=decodeURIComponent(l[0]);if(s[p]=t.read(c,p),n===p)break}catch{}}return n?s[n]:s}}return Object.create({set:r,get:i,remove:function(n,o){r(n,"",Kr({},o,{expires:-1}))},withAttributes:function(n){return ln(this.converter,Kr({},this.attributes,n))},withConverter:function(n){return ln(Kr({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var cn=ln(om,{path:"/"});var st=class{getItem(e){let r=window.localStorage.getItem(e);return r===null?void 0:r}setItem(e,r){return window.localStorage.setItem(e,r)}},$r=class{constructor(){this.cache={}}getItem(e){return this.cache[e]}setItem(e,r){this.cache[e]=r}},Yr=class{getItem(e){}setItem(e,r){}},at=class{getItem(e){return cn.get(e)}setItem(e,r){return cn.set(e,r,{domain:window.location.hostname,expires:60})}};var sm="_storage_",am=300,lm=K?Yr:st,Fe=class{constructor(e=sm,r=new lm){this._key=e;this.provider=r;this.data={};this.logger=ae("storage");this.all=()=>this.data;this.get=(e,r=void 0)=>(this.logger.log("get",{path:e,defaultValue:r}),Bt(this.data,e,r));this.set=(e,r,i=!1)=>{if(this.logger.log("set",{path:e,value:r}),kr(this.data,e,r,Object),i){this.write();return}this.queue||(this.queue=setTimeout(()=>{this.write()},am))};this.write=()=>{try{this.provider.setItem(this._key,JSON.stringify(this.data)),this.logger.log("writing",this.data)}catch(e){this.logger.warn("Storage error",e)}this.queue=void 0};this.remove=e=>{this.logger.log("remove",{path:e}),this.set(e,void 0)};this.clear=()=>{try{this.provider.setItem(this._key,"")}catch(e){this.logger.warn("Storage error",e)}};this.init()}set key(e){this._key=e,this.init()}init(){try{let e=this.provider.getItem(this._key);e=e?JSON.parse(e):this.data,e&&(this.data=e)}catch(e){this.logger.warn("Storage error",e),this.clear()}this.data||(this.data={})}};var lt=class{constructor(e,r){this.frill=e;this.config=r;this.destroyed=!1;this.state={isOpen:!1,isLoading:!0};this.version=`${Ut}.${nl}`;this.events=new zt;this.open=()=>{this.state.isOpen||(this.ipc.client.interaction({type:"open"}),this.events.emit("open",void 0))};this.close=()=>{this.state.isOpen&&(this.ipc.client.interaction({type:"close"}),this.events.emit("close",void 0))};this.toggle=e=>{if(e&&(e.__frillHandled=!0),this.state.isOpen){this.close();return}this.open()};this.destroy=()=>{this.destroyed=!0,this.ipc?.destroy(),this.events.emit("destroy",void 0)};this.onLogin=(e,r)=>{if(this.frill.identity?.tokens?.idx===e.idx)return;let i={user:e};this.events.emit("login",i);let n=Object.values(this.frill.containers)[0];n?n.storeUserTokens(r,this):qt("Frill('survey') or Frill('widget')")};this.onLogout=()=>{if(!this.frill.identity)return;this.events.emit("logout",void 0);let e=Object.values(this.frill.containers)[0];e?e.storeUserTokens(null,this):qt("Frill('survey') or Frill('widget')")};if(this.api=new ot(this.config.key,{frill:e,language:this.config.language}),this.store=new Fe(Dl(this.config.key),this.config.disableCookies?new $r:new at),r.callbacks)for(let[i,n]of Object.entries(r.callbacks)){let o=i.replace(/^on([A-Z])/,(s,a)=>a.toLowerCase());this.events.on(o,n)}}get id(){return this.config.id||this.config.key}identify(e){this.ipc.client.identify(e)}unidentify(){this.ipc.client.unidentify()}update(){}};function ct(t){let e=document.createElement("iframe");e.tabIndex=0,e.setAttribute("sandbox","allow-same-origin allow-scripts allow-top-navigation allow-popups allow-forms allow-presentation allow-popups-to-escape-sandbox"),e.setAttribute("aria-hidden","false"),e.style.border="0",e.style.outline="0",e.style.width="100%",e.style.height="100%";for(let[r,i]of Object.entries(t))e[r]=i;return e}function Vr(t){let e=document.createElement("strong");return e.className="Frill_Notification__Badge",e.innerText=t.label,e.style.color=t.color,e}function Hr(t={}){let e=document.createElement("button");e.type="button",e.className="Frill_Notification__Close",e.innerHTML='<svg fill="none" viewBox="0 0 9 9" xmlns="http://www.w3.org/2000/svg"><g opacity=".5" stroke="#73737d" stroke-linecap="round" stroke-width="2"><path d="m8 1-7 7"/><path d="m8 8-7-7"/></g></svg>';for(let[r,i]of Object.entries(t))e[r]=i;return e}function jr(t,e,r){let{company:i}=t.getConfig(),n=document.createElement("button");n.type="button",n.innerText=e.button.label||i.language?.["announcement-view"]||"View Announcement",n.className="Frill_Notification__Button",n.style.backgroundColor=e.button.backgroundColor||"#1675f0";let o=e.button.backgroundColor?e.button.color:"light";return n.style.color=o==="light"?"#fff":"#000",n.addEventListener("click",s=>{s.stopPropagation(),e.button.action==="widget"&&(t.viewAnnouncement(e.announcementSlug),t.open()),r()}),n}var Hl=1e3*60*60,jl=Hl*24,cm=jl*30.437,Vl={hour:Hl,day:jl,month:cm,session:1/0};function um(t,e){return t.history.some(r=>r.type==="survey-open"&&r.id===e)}function pm(t,e){return t.history.some(r=>(r.type==="survey-submit"||r.type==="survey-dismiss")&&r.id===e)}function fm(t){return t.history.some(e=>e.type==="survey-submit"||e.type==="survey-dismiss")}function Xt(t){return Object.values(t.surveys).filter(e=>e.state.isOpen).length>0}function qr(t,e,r,i,n){if(Xt(t))return!1;let{afterClose:o,afterResponse:s,oncePerVisit:a=!0,preventSurveyAfterResponse:l}=r.frequency,{showAfter:c}=r.targeting;if(r.audience?.hideFromGuests&&(!n?.tokens||!n?.tokens.email)||a&&um(t,e)||pm(t,e)||l&&fm(t))return!1;let{surveys:p,identifiedAt:m,sessionCount:f}=i,{lastInteraction:g}=p?.[e]||{};if(!g){if(c.active&&c.value>0){if(c.unit==="session")return f>=c.value;if(m){let T=Pt(m),u=Date.now(),d=c.value*Vl[c.unit];return u>=T.getTime()+d}}return!0}let y=g.type==="dismiss"?o:s;if(!y.active||y.value<1)return!1;if(y.unit==="session")return f-(g.session||0)>=y.value;let S=Pt(g.date),x=Date.now(),E=y.value*Vl[y.unit];return x>=S.getTime()+E}function zr(t,e,r){let i=Yt(Fl(t.type,r),t.settings);return e?Yt(i,e):i}var ut=class extends lt{constructor(r,i,n){super(r,i);this.frill=r;this.config=i;this.targeter=n;this.classNames={default:"Frill_Survey",loading:"Frill_Survey--loading",open:"Frill_Survey--open",enter:"Frill_Survey--enter"};this.state={isOpen:!1,isLoading:!0,width:0,height:0};this.open=()=>{this.state.isOpen||!this.frame||(this.frill.history.push({type:"survey-open",id:this.survey.idx}),this.ipc.client.interaction({type:"open"}),this.state.isOpen=!0,this.update(),this.frame.focus(),this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30),this.events.emit("open",void 0))};this.close=()=>{this.state.isOpen&&(this.element.classList.remove(this.classNames.open),this.ipc.client.interaction({type:"close"}),this.state.isOpen=!1,this.update(),this.frame&&document.activeElement===this.frame&&this.frame.blur(),this.events.emit("close",void 0))};this.destroy=()=>{this.destroyed=!0,this.ipc?.destroy(),this.style?.parentNode?.removeChild(this.style),this.element?.parentNode?.removeChild(this.element),this.frame=void 0,this.style=void 0,delete this.frill.surveys?.[this.id],this.events.emit("destroy",void 0)};this.updateSettings=(r,i=!1)=>{if(!this.settings)return;let n=this.settings.appearance.position;r.settings&&(this.settings=i?r.settings:Yt(this.settings,r.settings)),r.type&&(this.type=r.type),this.ipc.client.updateSettings({type:this.type,settings:this.settings,language:r.language}),this.settings.appearance.position!==n&&(this.element.classList.remove(`${this.classNames.default}--${n}`),this.element.classList.add(`${this.classNames.default}--${this.settings.appearance.position}`))};this.update=()=>{if(!this.element)return;let{width:r,height:i}=this.state;this.element.style.width=r+"px",this.element.style.height=i+"px"};this.getConfig=()=>({href:window.location.href,company:this.company,settings:this.settings,storage:this.store.all(),survey:this.survey});this.onAppReady=()=>{if(this.state.isLoading){if(this.state.isLoading=!1,this.update(),this.ipc.ready(),this.ipc.flush(),this.events.emit("ready",this),this.config.previewMode){this.open();return}Xt(this.frill)||this.open()}};this.onSubmit=r=>{this.frill.history.push({type:"survey-submit",id:this.survey.idx}),this.events.emit("submit",r)};this.dismiss=()=>{this.frill.history.push({type:"survey-dismiss",id:this.survey.idx}),this.config.previewMode||this.destroy()};this.resize=({width:r,height:i})=>{this.state.width=r,this.state.height=i,this.update()};if(!i.key){P("Your Frill Survey has failed to load. Please check your code snippet is correct.","Reason: Missing survey key");return}this.frill.surveys[this.id]=this,this.parent=this.config.container||document.body,this.ipc=new Ne(i.key,"frame",{ready:this.onAppReady,close:this.close,destroy:this.destroy,dismiss:this.dismiss,getConfig:this.getConfig,onLogin:this.onLogin,onLogout:this.onLogout,onSubmit:this.onSubmit,open:this.open,resize:this.resize,setStorage:this.store.set}),this.create().catch(o=>{re&&console.error(o),!(le(o)&&!o.warn)&&P("Your Frill Survey has failed to load. Please check your code snippet is correct.",`Reason: ${le(o)?o.message:"Unexpected error"}
Survey key: ${this.config?.key||"Missing key!"}`)})}async create(){if(this.settings)return;let{key:r,loadStyles:i=!0,frillTokens:n,language:o,ssoToken:s,settings:a,__survey:l}=this.config,{company:c,survey:p}=l||await this.api.survey();if(this.destroyed)return;if(!p)throw new C("Survey not found");this.company=c,this.survey={idx:p.idx,type:p.type},this.settings=zr(p,a,c.default_language),this.type=p.type;let m=this.settings.appearance.theme.idx||c.theme?.idx||"light";if(!this.targeter&&!this.config.previewMode){let g=this.frill.identity||null,y=g?.userMeta.sdk||{};if(!qr(this.frill,p.idx,this.settings,y,g))return}i&&(this.style=document.createElement("link"),this.style.id=`${ul}_${this.id}`,this.style.rel="stylesheet",this.style.href=Je,this.parent.prepend(this.style));let f={key:r};if(this.frill.identity){let{tokens:g,userMeta:y}=this.frill.identity;g&&(f.frillToken=g.frillToken,f.frillRefreshToken=g.frillRefreshToken,f.isAnonymous=g.email?void 0:"1");let S=y.sdk;f.meta=JSON.stringify({sessionCount:S.sessionCount})}n&&(f.frillToken=n.frillToken,f.frillRefreshToken=n.frillRefreshToken,f.isAnonymous=n.email?void 0:"1"),o&&(f.lang=o),s&&(f.ssoToken=s),this.config.user&&(f.user=JSON.stringify(this.config.user)),this.config.disableAnalytics&&(f.analytics="0"),this.config.disableCookies&&(f.cookies="0"),this.config.previewMode&&(f.preview="1"),this.frame=ct({id:`${ll}_${this.id}`,className:cl,src:`${al}/?${Ae(f)}`}),this.ipc.frame=this.frame,this.element=document.createElement("div"),this.element.setAttribute("role","dialog"),this.element.classList.add(this.classNames.default,`${this.classNames.default}--${this.settings.appearance.position}`,`${this.classNames.default}--${m}`),this.element.appendChild(this.frame),this.parent.appendChild(this.element)}};var ql={announcement:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g stroke="currentColor" stroke-width="1.5"><path d="m4.45833 8.37499h3.88889c5.34718-.4861 9.23608-2.91666 9.23608-3.40276 0-.48612.4861-.97223 1.4584-.97223.7778 0 1.2963.64814 1.4583.97223v12.63887c0 .4861-.2917 1.4584-1.4583 1.4584-1.1667 0-1.2963-.9723-1.4584-1.4584-4.375-1.9445-7.6157-2.5926-9.23608-2.9166h-3.88889c-.97221 0-1.45833-1.0695-1.45833-3.4029 0-2.33327.48612-2.91661 1.45833-2.91661z"/><path d="m8.34732 8.37476v6.31944"/><path d="m17.5834 4.97223v12.63887"/><path d="m5.43057 14.6945 2.43055 5.3472c.16204.3241.77778.8751 1.94445.4862.80213-.2674.48613-.9723.48613-1.4584l-.48613-3.8889"/></g></svg>',roadmap:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="m9 4.75c-.13511 0-.26187.03573-.37136.09825l-5.48778 2.99333c-.24094.13142-.39086.38396-.39086.65842v10.5c0 .255.12956.4925.34396.6306.2144.138.48425.1577.71639.0522l5.17427-2.352 5.67998 2.84c.2196.1098.479.1052.6945-.0124l5.5-3c.241-.1314.3909-.3839.3909-.6584v-10.5c0-.24466-.1193-.47394-.3197-.6143s-.4567-.17416-.6866-.09054l-5.2252 1.90006-5.71454-2.38107c-.09291-.04124-.19576-.06415-.30396-.06415zm-4.75 4.19523 4-2.18182v9.25369l-4 1.8181zm10 9.34127-4.5-2.25v-9.4115l4.5 1.875zm1.5-.0499 4-2.1818v-8.98402l-4 1.45454z" fill="currentColor" fillRule="evenodd"/></svg>',bolt:'<svg fill="none" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="m6.98592 18.5024h7.60558l-4.014 10.8001c-.5212 1.4026.9155 2.132 1.845.9959l12.2254-15.1623c.2394-.2946.3521-.5611.3521-.8696 0-.519-.3944-.9117-.9718-.9117h-7.6057l4.0141-10.80017c.5211-1.40262-.9296-2.131982-1.8451-.99586l-12.2253 15.16233c-.23944.2945-.3662.561-.3662.8696 0 .5189.40845.9117.98592.9117z" fill="currentColor"/></svg>',idea:'<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="m7.36573 18.0735-1.43908-1.4391 7.32345-7.32349 1.4391 1.43909zm8.90197-6.7807c.0042-.004.0085-.0082.0127-.0123.0041-.0042.0083-.0085.0123-.0127l2.9292-2.92919c.537-.53697.537-1.40757 0-1.94454l-1.6158-1.61585c-.537-.53697-1.4076-.53697-1.9446 0l-2.9302 2.93022c-.0039.00373-.0078.00752-.0116.01136s-.0076.00771-.0114.01161l-7.93069 7.93069c-.53697.537-.53697 1.4076 0 1.9446l1.61585 1.6158c.53697.537 1.40757.537 1.94454 0zm-1.9569-3.04255 2.323-2.32299 1.4391 1.43908-2.323 2.32299zm-6.06077-3.62512c.27614 0 .5.22386.5.5v1.375h1.37497c.2762 0 .5.22386.5.5s-.2238.5-.5.5h-1.37497v1.375c0 .27614-.22386.5-.5.5s-.5-.22386-.5-.5v-1.375h-1.375c-.27614 0-.5-.22386-.5-.5s.22386-.5.5-.5h1.375v-1.375c0-.27614.22386-.5.5-.5zm11.12497 7.37497c0-.2761-.2238-.5-.5-.5-.2761 0-.5.2239-.5.5v1.375h-1.375c-.2761 0-.5.2239-.5.5 0 .2762.2239.5.5.5h1.375v1.375c0 .2762.2239.5.5.5.2762 0 .5-.2238.5-.5v-1.375h1.375c.2762 0 .5-.2238.5-.5 0-.2761-.2238-.5-.5-.5h-1.375zm-4.25 3.875c.2762 0 .5.2239.5.5v.75h.75c.2762 0 .5.2239.5.5 0 .2762-.2238.5-.5.5h-.75v.75c0 .2762-.2238.5-.5.5-.2761 0-.5-.2238-.5-.5v-.75h-.75c-.2761 0-.5-.2238-.5-.5 0-.2761.2239-.5.5-.5h.75v-.75c0-.2761.2239-.5.5-.5z" fill="currentColor" fillRule="evenodd"/></svg>',intercom:'<svg viewBox="0 0 28 32"><path fill="currentColor" d="M28,32 C28,32 23.2863266,30.1450667 19.4727818,28.6592 L3.43749107,28.6592 C1.53921989,28.6592 0,27.0272 0,25.0144 L0,3.6448 C0,1.632 1.53921989,0 3.43749107,0 L24.5615088,0 C26.45978,0 27.9989999,1.632 27.9989999,3.6448 L27.9989999,22.0490667 L28,22.0490667 L28,32 Z M23.8614088,20.0181333 C23.5309223,19.6105242 22.9540812,19.5633836 22.5692242,19.9125333 C22.5392199,19.9392 19.5537934,22.5941333 13.9989999,22.5941333 C8.51321617,22.5941333 5.48178311,19.9584 5.4277754,19.9104 C5.04295119,19.5629428 4.46760991,19.6105095 4.13759108,20.0170667 C3.97913051,20.2124916 3.9004494,20.4673395 3.91904357,20.7249415 C3.93763774,20.9825435 4.05196575,21.2215447 4.23660523,21.3888 C4.37862552,21.5168 7.77411059,24.5386667 13.9989999,24.5386667 C20.2248893,24.5386667 23.6203743,21.5168 23.7623946,21.3888 C23.9467342,21.2215726 24.0608642,20.9827905 24.0794539,20.7254507 C24.0980436,20.4681109 24.0195551,20.2135019 23.8614088,20.0181333 Z"></path></svg>'},Xr=class{constructor(e,r){this.widget=e;this.options=r;this.type="floating";this.classNames={default:"Frill_Trigger_Floating"}}setup(){let{backgroundColor:e=me,color:r="light",icon:i="bolt",position:n="bottom-right"}=this.options;this.element=document.createElement("button"),this.element.type="button",this.element.classList.add(Ze,this.classNames.default,`${this.classNames.default}--${n}`),this.element.style.color=r==="dark"?"#202020":"#fff",this.element.style.backgroundColor=e||me,this.element.innerHTML=i in ql?ql[i]:"",this.element.setAttribute("aria-label",ye.LAUNCHER_OPEN),this.widget.parent.appendChild(this.element),this.element.addEventListener("click",this.widget.toggle),this.element.addEventListener("mouseenter",this.widget.interaction)}addBadge(e){this.element.appendChild(e)}destroy(){this.element&&(this.element.removeEventListener("click",this.widget.toggle),this.element.removeEventListener("mouseenter",this.widget.interaction),this.element.parentNode?.removeChild(this.element))}update(){if(!this.element)return;let{isOpen:e,unreadCount:r}=this.widget.state;r?this.element.classList.add(se):this.element.classList.remove(se),this.element.setAttribute("aria-label",e?ye.LAUNCHER_CLOSE:ye.LAUNCHER_OPEN)}};var pt=class{constructor(e={}){this.options=e;this.observer=null;this.callbacks={};this.i=0;this.emit=Lr(()=>{for(let e of Object.values(this.callbacks))e()},this.options.wait??100);this.onMutation=(e,r)=>{for(let i of e)if(i.type==="childList"){let n=Array.from(i.addedNodes).filter(zl),o=Array.from(i.removedNodes).filter(zl);if(n.length||o.length){this.emit();break}}};"MutationObserver"in window&&(this.observer=new MutationObserver(this.onMutation),this.observer.observe(document.body,{childList:!0,subtree:!0}))}on(e){let r=this.i++;this.callbacks[r]=e}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.emit.cancel()}};function zl(t){return t instanceof HTMLElement}var Qr=class{constructor(e,r){this.widget=e;this.options=r;this.type="selector";this.classNames={default:"Frill_Trigger_Selector"};this.elements=[];this.attachSelectors=()=>{if(this.elements=this.elements.filter(r=>r.isConnected?!0:(r.removeEventListener("click",this.widget.toggle,!0),r.removeEventListener("mouseenter",this.widget.interaction,!0),!1)),this.elements.length&&!this.options.queryAll)return;let e=this.getElements();for(let r of e)this.elements.includes(r)||(this.elements.push(r),r.addEventListener("click",this.widget.toggle,!0),r.addEventListener("mouseenter",this.widget.interaction,!0),r.classList.add(Ze,this.classNames.default))}}get element(){return this.elements[0]}setup(){let{selector:e}=this.options;if(!e)throw new C('Missing required "CSS Selector".');this.observer=new pt({wait:300}),this.observer.on(this.attachSelectors),this.attachSelectors()}getElements(){let{selector:e,queryAll:r}=this.options;if(typeof e=="string"){if(r&&this.widget.settings.view.type!=="popover"){let n=Array.from(document.querySelectorAll(e));return n.length=Math.min(n.length,10),n}let i=document.querySelector(e);return i?[i]:[]}return[e]}addBadge(e){this.elements.forEach((r,i)=>{i>0&&(e=e.cloneNode(),this.widget.badges.push(e)),r.appendChild(e)})}destroy(){this.observer?.destroy(),this.observer=void 0;for(let e of this.elements){for(let r of this.widget.badges)e.contains(r)&&e.removeChild(r);e.removeEventListener("click",this.widget.toggle),e.removeEventListener("mouseenter",this.widget.interaction)}}update(){for(let e of this.elements){let{unreadCount:r}=this.widget.state;r?e.classList.add(se):e.classList.remove(se)}}};var Jr=class{constructor(e,r){this.widget=e;this.options=r;this.type="tab";this.classNames={default:"Frill_Trigger_Tab"}}setup(){let{color:e="light",text:r,backgroundColor:i,position:n="center-right"}=this.options;this.element=document.createElement("button"),this.element.type="button",this.element.classList.add(Ze,this.classNames.default,`${this.classNames.default}--${n}`),this.element.style.color=e==="light"?"#fff":"#202020",this.element.style.backgroundColor=i||me,this.element.innerText=r||"What's new",this.element.setAttribute("aria-label",ye.LAUNCHER_OPEN),this.widget.parent.appendChild(this.element),this.element.addEventListener("click",this.widget.toggle),this.element.addEventListener("mouseenter",this.widget.interaction)}addBadge(e){this.element.appendChild(e)}destroy(){this.element&&(this.element.removeEventListener("click",this.widget.toggle),this.element.removeEventListener("mouseenter",this.widget.interaction),this.element.parentNode?.removeChild(this.element))}update(){if(!this.element)return;let{isOpen:e,unreadCount:r}=this.widget.state;r?this.element.classList.add(se):this.element.classList.remove(se),this.element.setAttribute("aria-label",e?ye.LAUNCHER_CLOSE:ye.LAUNCHER_OPEN)}};var Qt=class{constructor(){this.css="";this.type="null"}get element(){return null}setup(){}addBadge(e){}destroy(){}update(){}};function Xl(t){let e=t.settings.launcher;if(t.settings.view.type==="embed")return new Qt;switch(e.type){case"floating":return new Xr(t,e);case"selector":return new Qr(t,e);case"tab":return new Jr(t,e);case"null":return new Qt;default:throw new C("Invalid launcher option. Available options: `floating`, `selector` and `tray`")}}var Zr=class{constructor(e,r){this.widget=e;this.options=r;this.type="embed"}setup(){let{parent:e,frame:r}=this.widget;e.appendChild(r)}destroy(){let{parent:e,frame:r}=this.widget;e.removeChild(r),e.removeAttribute(he)}update(){}};var ft=new Set,dm=0,ei=0,un=0;function dt(){let t=dm++;function e(){ft.has(t)||(ft.size===0&&gm(),ft.add(t))}function r(){ft.has(t)&&(ft.delete(t),ft.size===0&&ym())}return{on:e,off:r}}function mm(){if(typeof ei=="number")return ei;let t=document.documentElement,e=document.createElement("div");return e.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),t.appendChild(e),ei=e.offsetWidth-e.clientWidth,t.removeChild(e),ei}function hm(){return document.documentElement.scrollHeight>window.innerHeight}function gm(){if(typeof document>"u")return;let t=document.documentElement;un=window.pageYOffset,t.style.width=hm()?`calc(100% - ${mm()}px)`:"100%",t.style.position="fixed",t.style.top=`${-un}px`,t.style.overflow="hidden"}function ym(){if(typeof document>"u")return;let t=document.documentElement;t.style.width="",t.style.position="",t.style.top="",t.style.overflow="",window.scroll(0,un),window.dispatchEvent(new CustomEvent("scroll"))}var ti=class{constructor(e,r){this.widget=e;this.options=r;this.type="modal";this.classNames={default:"Frill_View_Modal",loading:"Frill_View_Modal--loading",mobile:"Frill_View_Modal--mobile",open:"Frill_View_Modal--open",enter:"Frill_View_Modal--enter",content:"Frill_View_Modal__Content",shadow:"Frill_View_Modal__Shadow"};this.lock=dt();this.onWidowClick=e=>{e.__frillHandled||this.element&&!this.content.contains(e.target)&&this.widget.close()}}get width(){return this.widget.state.isMobile?"100%":this.options.width?.replace("%","vw")||"640px"}get height(){return this.widget.state.isMobile?"100%":this.options.height?.replace("%","vh")||"500px"}setup(){let{frame:e}=this.widget;this.element=document.createElement("div"),this.element.setAttribute("role","dialog"),this.element.style.display="none",this.element.classList.add(et,this.classNames.default),this.content=document.createElement("div"),this.content.classList.add(this.classNames.content),this.content.style.width=this.width,this.content.style.height=this.height,this.content.appendChild(e),this.shadow=document.createElement("div"),this.shadow.classList.add(this.classNames.shadow),this.element.appendChild(this.content),this.element.appendChild(this.shadow),this.widget.parent.appendChild(this.element)}destroy(){this.lock.off(),this.shadow?.removeEventListener("click",this.onWidowClick),this.element?.parentNode?.removeChild(this.element)}update(){if(!this.element)return;this.element.style.display="";let{isOpen:e,isLoading:r,isMobile:i}=this.widget.state;r?this.element.classList.add(this.classNames.loading):this.element.classList.remove(this.classNames.loading),i?this.element.classList.add(this.classNames.mobile):this.element.classList.remove(this.classNames.mobile),this.content.style.width=this.width,this.content.style.height=this.height;let n=this.element.classList.contains(this.classNames.open);e?n||(this.options.preventScroll&&this.lock.on(),this.shadow.addEventListener("click",this.onWidowClick),this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30)):(this.element.classList.remove(this.classNames.open),this.shadow.removeEventListener("click",this.onWidowClick),this.lock.off())}};var mt=Math.min,ce=Math.max,Zt=Math.round,er=Math.floor,X=t=>({x:t,y:t}),Sm={left:"right",right:"left",bottom:"top",top:"bottom"},bm={start:"end",end:"start"};function pn(t,e,r){return ce(t,mt(e,r))}function tr(t,e){return typeof t=="function"?t(e):t}function Se(t){return t.split("-")[0]}function rr(t){return t.split("-")[1]}function fn(t){return t==="x"?"y":"x"}function dn(t){return t==="y"?"height":"width"}var _m=new Set(["top","bottom"]);function ue(t){return _m.has(Se(t))?"y":"x"}function mn(t){return fn(ue(t))}function Zl(t,e,r){r===void 0&&(r=!1);let i=rr(t),n=mn(t),o=dn(n),s=n==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=Jt(s)),[s,Jt(s)]}function ec(t){let e=Jt(t);return[ri(t),e,ri(e)]}function ri(t){return t.replace(/start|end/g,e=>bm[e])}var Ql=["left","right"],Jl=["right","left"],vm=["top","bottom"],xm=["bottom","top"];function wm(t,e,r){switch(t){case"top":case"bottom":return r?e?Jl:Ql:e?Ql:Jl;case"left":case"right":return e?vm:xm;default:return[]}}function tc(t,e,r,i){let n=rr(t),o=wm(Se(t),r==="start",i);return n&&(o=o.map(s=>s+"-"+n),e&&(o=o.concat(o.map(ri)))),o}function Jt(t){return t.replace(/left|right|bottom|top/g,e=>Sm[e])}function Em(t){return{top:0,right:0,bottom:0,left:0,...t}}function rc(t){return typeof t!="number"?Em(t):{top:t,right:t,bottom:t,left:t}}function Re(t){let{x:e,y:r,width:i,height:n}=t;return{width:i,height:n,top:r,left:e,right:e+i,bottom:r+n,x:e,y:r}}function ic(t,e,r){let{reference:i,floating:n}=t,o=ue(e),s=mn(e),a=dn(s),l=Se(e),c=o==="y",p=i.x+i.width/2-n.width/2,m=i.y+i.height/2-n.height/2,f=i[a]/2-n[a]/2,g;switch(l){case"top":g={x:p,y:i.y-n.height};break;case"bottom":g={x:p,y:i.y+i.height};break;case"right":g={x:i.x+i.width,y:m};break;case"left":g={x:i.x-n.width,y:m};break;default:g={x:i.x,y:i.y}}switch(rr(e)){case"start":g[s]-=f*(r&&c?-1:1);break;case"end":g[s]+=f*(r&&c?-1:1);break}return g}var nc=async(t,e,r)=>{let{placement:i="bottom",strategy:n="absolute",middleware:o=[],platform:s}=r,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e)),c=await s.getElementRects({reference:t,floating:e,strategy:n}),{x:p,y:m}=ic(c,i,l),f=i,g={},y=0;for(let S=0;S<a.length;S++){let{name:x,fn:E}=a[S],{x:T,y:u,data:d,reset:h}=await E({x:p,y:m,initialPlacement:i,placement:f,strategy:n,middlewareData:g,rects:c,platform:s,elements:{reference:t,floating:e}});p=T??p,m=u??m,g={...g,[x]:{...g[x],...d}},h&&y<=50&&(y++,typeof h=="object"&&(h.placement&&(f=h.placement),h.rects&&(c=h.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:n}):h.rects),{x:p,y:m}=ic(c,f,l)),S=-1)}return{x:p,y:m,placement:f,strategy:n,middlewareData:g}};async function hn(t,e){var r;e===void 0&&(e={});let{x:i,y:n,platform:o,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:f=!1,padding:g=0}=tr(e,t),y=rc(g),x=a[f?m==="floating"?"reference":"floating":m],E=Re(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(x)))==null||r?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:p,strategy:l})),T=m==="floating"?{x:i,y:n,width:s.floating.width,height:s.floating.height}:s.reference,u=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),d=await(o.isElement==null?void 0:o.isElement(u))?await(o.getScale==null?void 0:o.getScale(u))||{x:1,y:1}:{x:1,y:1},h=Re(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:T,offsetParent:u,strategy:l}):T);return{top:(E.top-h.top+y.top)/d.y,bottom:(h.bottom-E.bottom+y.bottom)/d.y,left:(E.left-h.left+y.left)/d.x,right:(h.right-E.right+y.right)/d.x}}var oc=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,i;let{placement:n,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:S=!0,...x}=tr(t,e);if((r=o.arrow)!=null&&r.alignmentOffset)return{};let E=Se(n),T=ue(a),u=Se(a)===a,d=await(l.isRTL==null?void 0:l.isRTL(c.floating)),h=f||(u||!S?[Jt(a)]:ec(a)),_=y!=="none";!f&&_&&h.push(...tc(a,S,y,d));let w=[a,...h],R=await hn(e,x),N=[],F=((i=o.flip)==null?void 0:i.overflows)||[];if(p&&N.push(R[E]),m){let Z=Zl(n,s,d);N.push(R[Z[0]],R[Z[1]])}if(F=[...F,{placement:n,overflows:N}],!N.every(Z=>Z<=0)){var G,H;let Z=(((G=o.flip)==null?void 0:G.index)||0)+1,mi=w[Z];if(mi&&(!(m==="alignment"?T!==ue(mi):!1)||F.every(j=>ue(j.placement)===T?j.overflows[0]>0:!0)))return{data:{index:Z,overflows:F},reset:{placement:mi}};let vt=(H=F.filter(be=>be.overflows[0]<=0).sort((be,j)=>be.overflows[1]-j.overflows[1])[0])==null?void 0:H.placement;if(!vt)switch(g){case"bestFit":{var _t;let be=(_t=F.filter(j=>{if(_){let fe=ue(j.placement);return fe===T||fe==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(fe=>fe>0).reduce((fe,Vc)=>fe+Vc,0)]).sort((j,fe)=>j[1]-fe[1])[0])==null?void 0:_t[0];be&&(vt=be);break}case"initialPlacement":vt=a;break}if(n!==vt)return{reset:{placement:vt}}}return{}}}};var Tm=new Set(["left","top"]);async function Am(t,e){let{placement:r,platform:i,elements:n}=t,o=await(i.isRTL==null?void 0:i.isRTL(n.floating)),s=Se(r),a=rr(r),l=ue(r)==="y",c=Tm.has(s)?-1:1,p=o&&l?-1:1,m=tr(e,t),{mainAxis:f,crossAxis:g,alignmentAxis:y}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return a&&typeof y=="number"&&(g=a==="end"?y*-1:y),l?{x:g*p,y:f*c}:{x:f*c,y:g*p}}var sc=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,i;let{x:n,y:o,placement:s,middlewareData:a}=e,l=await Am(e,t);return s===((r=a.offset)==null?void 0:r.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:n+l.x,y:o+l.y,data:{...l,placement:s}}}}},ac=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){let{x:r,y:i,placement:n}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:x=>{let{x:E,y:T}=x;return{x:E,y:T}}},...l}=tr(t,e),c={x:r,y:i},p=await hn(e,l),m=ue(Se(n)),f=fn(m),g=c[f],y=c[m];if(o){let x=f==="y"?"top":"left",E=f==="y"?"bottom":"right",T=g+p[x],u=g-p[E];g=pn(T,g,u)}if(s){let x=m==="y"?"top":"left",E=m==="y"?"bottom":"right",T=y+p[x],u=y-p[E];y=pn(T,y,u)}let S=a.fn({...e,[f]:g,[m]:y});return{...S,data:{x:S.x-r,y:S.y-i,enabled:{[f]:o,[m]:s}}}}}};function ii(){return typeof window<"u"}function Ce(t){return cc(t)?(t.nodeName||"").toLowerCase():"#document"}function B(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Q(t){var e;return(e=(cc(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function cc(t){return ii()?t instanceof Node||t instanceof B(t).Node:!1}function Y(t){return ii()?t instanceof Element||t instanceof B(t).Element:!1}function J(t){return ii()?t instanceof HTMLElement||t instanceof B(t).HTMLElement:!1}function lc(t){return!ii()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof B(t).ShadowRoot}var Im=new Set(["inline","contents"]);function gt(t){let{overflow:e,overflowX:r,overflowY:i,display:n}=V(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+r)&&!Im.has(n)}var Om=new Set(["table","td","th"]);function uc(t){return Om.has(Ce(t))}var Dm=[":popover-open",":modal"];function ir(t){return Dm.some(e=>{try{return t.matches(e)}catch{return!1}})}var Nm=["transform","translate","scale","rotate","perspective"],Fm=["transform","translate","scale","rotate","perspective","filter"],Rm=["paint","layout","strict","content"];function ni(t){let e=oi(),r=Y(t)?V(t):t;return Nm.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||Fm.some(i=>(r.willChange||"").includes(i))||Rm.some(i=>(r.contain||"").includes(i))}function pc(t){let e=pe(t);for(;J(e)&&!Pe(e);){if(ni(e))return e;if(ir(e))return null;e=pe(e)}return null}function oi(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}var Cm=new Set(["html","body","#document"]);function Pe(t){return Cm.has(Ce(t))}function V(t){return B(t).getComputedStyle(t)}function nr(t){return Y(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function pe(t){if(Ce(t)==="html")return t;let e=t.assignedSlot||t.parentNode||lc(t)&&t.host||Q(t);return lc(e)?e.host:e}function fc(t){let e=pe(t);return Pe(e)?t.ownerDocument?t.ownerDocument.body:t.body:J(e)&&gt(e)?e:fc(e)}function ht(t,e,r){var i;e===void 0&&(e=[]),r===void 0&&(r=!0);let n=fc(t),o=n===((i=t.ownerDocument)==null?void 0:i.body),s=B(n);if(o){let a=si(s);return e.concat(s,s.visualViewport||[],gt(n)?n:[],a&&r?ht(a):[])}return e.concat(n,ht(n,[],r))}function si(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function gc(t){let e=V(t),r=parseFloat(e.width)||0,i=parseFloat(e.height)||0,n=J(t),o=n?t.offsetWidth:r,s=n?t.offsetHeight:i,a=Zt(r)!==o||Zt(i)!==s;return a&&(r=o,i=s),{width:r,height:i,$:a}}function yn(t){return Y(t)?t:t.contextElement}function yt(t){let e=yn(t);if(!J(e))return X(1);let r=e.getBoundingClientRect(),{width:i,height:n,$:o}=gc(e),s=(o?Zt(r.width):r.width)/i,a=(o?Zt(r.height):r.height)/n;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}var Pm=X(0);function yc(t){let e=B(t);return!oi()||!e.visualViewport?Pm:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Mm(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==B(t)?!1:e}function Me(t,e,r,i){e===void 0&&(e=!1),r===void 0&&(r=!1);let n=t.getBoundingClientRect(),o=yn(t),s=X(1);e&&(i?Y(i)&&(s=yt(i)):s=yt(t));let a=Mm(o,r,i)?yc(o):X(0),l=(n.left+a.x)/s.x,c=(n.top+a.y)/s.y,p=n.width/s.x,m=n.height/s.y;if(o){let f=B(o),g=i&&Y(i)?B(i):i,y=f,S=si(y);for(;S&&i&&g!==y;){let x=yt(S),E=S.getBoundingClientRect(),T=V(S),u=E.left+(S.clientLeft+parseFloat(T.paddingLeft))*x.x,d=E.top+(S.clientTop+parseFloat(T.paddingTop))*x.y;l*=x.x,c*=x.y,p*=x.x,m*=x.y,l+=u,c+=d,y=B(S),S=si(y)}}return Re({width:p,height:m,x:l,y:c})}function ai(t,e){let r=nr(t).scrollLeft;return e?e.left+r:Me(Q(t)).left+r}function Sc(t,e){let r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-ai(t,r),n=r.top+e.scrollTop;return{x:i,y:n}}function Lm(t){let{elements:e,rect:r,offsetParent:i,strategy:n}=t,o=n==="fixed",s=Q(i),a=e?ir(e.floating):!1;if(i===s||a&&o)return r;let l={scrollLeft:0,scrollTop:0},c=X(1),p=X(0),m=J(i);if((m||!m&&!o)&&((Ce(i)!=="body"||gt(s))&&(l=nr(i)),J(i))){let g=Me(i);c=yt(i),p.x=g.x+i.clientLeft,p.y=g.y+i.clientTop}let f=s&&!m&&!o?Sc(s,l):X(0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+p.x+f.x,y:r.y*c.y-l.scrollTop*c.y+p.y+f.y}}function km(t){return Array.from(t.getClientRects())}function Wm(t){let e=Q(t),r=nr(t),i=t.ownerDocument.body,n=ce(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),o=ce(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight),s=-r.scrollLeft+ai(t),a=-r.scrollTop;return V(i).direction==="rtl"&&(s+=ce(e.clientWidth,i.clientWidth)-n),{width:n,height:o,x:s,y:a}}var dc=25;function Um(t,e){let r=B(t),i=Q(t),n=r.visualViewport,o=i.clientWidth,s=i.clientHeight,a=0,l=0;if(n){o=n.width,s=n.height;let p=oi();(!p||p&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}let c=ai(i);if(c<=0){let p=i.ownerDocument,m=p.body,f=getComputedStyle(m),g=p.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,y=Math.abs(i.clientWidth-m.clientWidth-g);y<=dc&&(o-=y)}else c<=dc&&(o+=c);return{width:o,height:s,x:a,y:l}}var Gm=new Set(["absolute","fixed"]);function Bm(t,e){let r=Me(t,!0,e==="fixed"),i=r.top+t.clientTop,n=r.left+t.clientLeft,o=J(t)?yt(t):X(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,l=n*o.x,c=i*o.y;return{width:s,height:a,x:l,y:c}}function mc(t,e,r){let i;if(e==="viewport")i=Um(t,r);else if(e==="document")i=Wm(Q(t));else if(Y(e))i=Bm(e,r);else{let n=yc(t);i={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return Re(i)}function bc(t,e){let r=pe(t);return r===e||!Y(r)||Pe(r)?!1:V(r).position==="fixed"||bc(r,e)}function Km(t,e){let r=e.get(t);if(r)return r;let i=ht(t,[],!1).filter(a=>Y(a)&&Ce(a)!=="body"),n=null,o=V(t).position==="fixed",s=o?pe(t):t;for(;Y(s)&&!Pe(s);){let a=V(s),l=ni(s);!l&&a.position==="fixed"&&(n=null),(o?!l&&!n:!l&&a.position==="static"&&!!n&&Gm.has(n.position)||gt(s)&&!l&&bc(t,s))?i=i.filter(p=>p!==s):n=a,s=pe(s)}return e.set(t,i),i}function $m(t){let{element:e,boundary:r,rootBoundary:i,strategy:n}=t,s=[...r==="clippingAncestors"?ir(e)?[]:Km(e,this._c):[].concat(r),i],a=s[0],l=s.reduce((c,p)=>{let m=mc(e,p,n);return c.top=ce(m.top,c.top),c.right=mt(m.right,c.right),c.bottom=mt(m.bottom,c.bottom),c.left=ce(m.left,c.left),c},mc(e,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Ym(t){let{width:e,height:r}=gc(t);return{width:e,height:r}}function Vm(t,e,r){let i=J(e),n=Q(e),o=r==="fixed",s=Me(t,!0,o,e),a={scrollLeft:0,scrollTop:0},l=X(0);function c(){l.x=ai(n)}if(i||!i&&!o)if((Ce(e)!=="body"||gt(n))&&(a=nr(e)),i){let g=Me(e,!0,o,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else n&&c();o&&!i&&n&&c();let p=n&&!i&&!o?Sc(n,a):X(0),m=s.left+a.scrollLeft-l.x-p.x,f=s.top+a.scrollTop-l.y-p.y;return{x:m,y:f,width:s.width,height:s.height}}function gn(t){return V(t).position==="static"}function hc(t,e){if(!J(t)||V(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Q(t)===r&&(r=r.ownerDocument.body),r}function _c(t,e){let r=B(t);if(ir(t))return r;if(!J(t)){let n=pe(t);for(;n&&!Pe(n);){if(Y(n)&&!gn(n))return n;n=pe(n)}return r}let i=hc(t,e);for(;i&&uc(i)&&gn(i);)i=hc(i,e);return i&&Pe(i)&&gn(i)&&!ni(i)?r:i||pc(t)||r}var Hm=async function(t){let e=this.getOffsetParent||_c,r=this.getDimensions,i=await r(t.floating);return{reference:Vm(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function jm(t){return V(t).direction==="rtl"}var qm={convertOffsetParentRelativeRectToViewportRelativeRect:Lm,getDocumentElement:Q,getClippingRect:$m,getOffsetParent:_c,getElementRects:Hm,getClientRects:km,getDimensions:Ym,getScale:yt,isElement:Y,isRTL:jm};function vc(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function zm(t,e){let r=null,i,n=Q(t);function o(){var a;clearTimeout(i),(a=r)==null||a.disconnect(),r=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();let c=t.getBoundingClientRect(),{left:p,top:m,width:f,height:g}=c;if(a||e(),!f||!g)return;let y=er(m),S=er(n.clientWidth-(p+f)),x=er(n.clientHeight-(m+g)),E=er(p),u={rootMargin:-y+"px "+-S+"px "+-x+"px "+-E+"px",threshold:ce(0,mt(1,l))||1},d=!0;function h(_){let w=_[0].intersectionRatio;if(w!==l){if(!d)return s();w?s(!1,w):i=setTimeout(()=>{s(!1,1e-7)},1e3)}w===1&&!vc(c,t.getBoundingClientRect())&&s(),d=!1}try{r=new IntersectionObserver(h,{...u,root:n.ownerDocument})}catch{r=new IntersectionObserver(h,u)}r.observe(t)}return s(!0),o}function xc(t,e,r,i){i===void 0&&(i={});let{ancestorScroll:n=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=yn(t),p=n||o?[...c?ht(c):[],...ht(e)]:[];p.forEach(E=>{n&&E.addEventListener("scroll",r,{passive:!0}),o&&E.addEventListener("resize",r)});let m=c&&a?zm(c,r):null,f=-1,g=null;s&&(g=new ResizeObserver(E=>{let[T]=E;T&&T.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var u;(u=g)==null||u.observe(e)})),r()}),c&&!l&&g.observe(c),g.observe(e));let y,S=l?Me(t):null;l&&x();function x(){let E=Me(t);S&&!vc(S,E)&&r(),S=E,y=requestAnimationFrame(x)}return r(),()=>{var E;p.forEach(T=>{n&&T.removeEventListener("scroll",r),o&&T.removeEventListener("resize",r)}),m?.(),(E=g)==null||E.disconnect(),g=null,l&&cancelAnimationFrame(y)}}var wc=sc;var Ec=ac,Tc=oc;var Ac=(t,e,r)=>{let i=new Map,n={platform:qm,...r},o={...n.platform,_c:i};return nc(t,e,{...n,platform:o})};function Ic(t,e){let{launcher:r}=e.settings;if(r.type==="tab"){let i=t.includes("top"),n=t.includes("bottom");if(i||n)return r.position==="center-left"?["right"]:["left"]}}var li=class{constructor(e,r){this.widget=e;this.options=r;this.type="popover";this.classNames={default:"Frill_View_Popover",loading:"Frill_View_Popover--loading",open:"Frill_View_Popover--open",enter:"Frill_View_Popover--enter",mobile:"Frill_View_Popover--mobile"};this.onContainerClick=e=>{e.__frillHandled||this.element&&!this.element.contains(e.target)&&this.widget.close()}}setup(){let{frame:e,launcher:r}=this.widget,{offsetSkidding:i=0,offsetDistance:n=0,placement:o="bottom-end",isFixedPosition:s=!1,width:a="340px",height:l="460px"}=this.options,p=r.type!=="selector"||s?"fixed":"absolute";this.element=document.createElement("div"),this.element.classList.add(et,this.classNames.default,`Frill_Trigger--${r.type}`),this.element.style.width=a,this.element.style.height=l,this.element.style.display="none";let m=o.includes("top")||o.includes("bottom"),f=r.type==="selector"||r.type==="null",y=`calc(100% - 40px - ${r.type==="floating"?`${60+n}px`:0})`;this.element.style[m?"maxHeight":"maxWidth"]=y,this.element.style.position=p,this.element.appendChild(e),this.widget.parent.appendChild(this.element);let S=r.element;S||(this.reference=document.createElement("div"),this.reference.style.position="fixed",this.reference.style.bottom="20px",this.reference.style.right="20px",this.widget.parent.appendChild(this.reference),S=this.reference);let x=!(f&&s),E=this.widget.parent!==document.body?this.widget.parent:void 0;this.cleanupPopper=xc(S,this.element,()=>{Ac(S,this.element,{placement:o,strategy:p,middleware:[wc({mainAxis:n,crossAxis:i}),x&&Tc({fallbackPlacements:Ic(o,this.widget)}),Ec({padding:20,boundary:E})]}).then(({x:T,y:u})=>{Object.assign(this.element.style,{left:`${T}px`,top:`${u}px`})})})}destroy(){this.cleanupPopper?.(),this.element?.parentNode?.removeChild(this.element),this.widget.parent.removeEventListener("click",this.onContainerClick),this.reference&&this.reference.parentNode?.removeChild(this.reference)}update(){if(!this.element)return;this.element.style.display="";let{isOpen:e,isLoading:r,isMobile:i}=this.widget.state;r?this.element.classList.add(this.classNames.loading):this.element.classList.remove(this.classNames.loading),i?this.element.classList.add(this.classNames.mobile):this.element.classList.remove(this.classNames.mobile);let n=this.element.classList.contains(this.classNames.open);e?n||(setTimeout(()=>this.widget.parent.addEventListener("click",this.onContainerClick)),this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30)):(this.element.classList.remove(this.classNames.open),this.widget.parent.removeEventListener("click",this.onContainerClick))}};var ci=class{constructor(e,r){this.widget=e;this.options=r;this.type="sidebar";this.classNames={default:"Frill_View_Sidebar",loading:"Frill_View_Sidebar--loading",mobile:"Frill_View_Sidebar--mobile",open:"Frill_View_Sidebar--open",enter:"Frill_View_Sidebar--enter",content:"Frill_View_Sidebar__Content",shadow:"Frill_View_Sidebar__Shadow"};this.lock=dt();this.onWidowClick=e=>{e.__frillHandled||this.element&&!this.content.contains(e.target)&&this.widget.close()}}get width(){return this.widget.state.isMobile?"100%":this.options.width||"450px"}setup(){let{frame:e}=this.widget,{position:r="right"}=this.options;this.element=document.createElement("div"),this.element.setAttribute("role","dialog"),this.element.style.display="none",this.element.classList.add(et,this.classNames.default,`${this.classNames.default}--${r}`),this.content=document.createElement("div"),this.content.classList.add(this.classNames.content),this.content.style.width=this.width,this.content.appendChild(e),this.shadow=document.createElement("div"),this.shadow.classList.add(this.classNames.shadow),this.element.appendChild(this.content),this.element.appendChild(this.shadow),this.widget.parent.appendChild(this.element)}destroy(){this.lock.off(),this.shadow?.removeEventListener("click",this.onWidowClick),this.element?.parentNode?.removeChild(this.element)}update(){if(!this.element)return;this.element.style.display="";let{isOpen:e,isLoading:r,isMobile:i}=this.widget.state;r?this.element.classList.add(this.classNames.loading):this.element.classList.remove(this.classNames.loading),i?this.element.classList.add(this.classNames.mobile):this.element.classList.remove(this.classNames.mobile),this.content.style.width=this.width;let n=this.element.classList.contains(this.classNames.open);e?n||(this.options.preventScroll&&this.lock.on(),this.shadow.addEventListener("click",this.onWidowClick),this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30)):(this.element.classList.remove(this.classNames.open),this.shadow.removeEventListener("click",this.onWidowClick),this.lock.off())}};function Oc(t){let e=t.settings.view;switch(e.type){case"popover":return new li(t,e);case"modal":return new ti(t,e);case"sidebar":return new ci(t,e);case"embed":return new Zr(t,e);default:throw new C("Invalid view option. Available options: `popover`, `modal`, `sidebar` and `embed`")}}function Dc(t){return!!(t&&t.length>3&&t.indexOf("@")>0)}function Xm(t){if(!t||typeof t!="object")return;let{name:e="Guest",email:r,avatar:i}=t;if(Dc(r))return{name:e,email:r,avatar:kl(i)?i:void 0}}function Nc(t){if(!t||typeof t!="object")return;let e=Xm(t);if(e)return e;if(t.frillToken)return{frillToken:t.frillToken,frillRefreshToken:t.frillRefreshToken,email:t.email};if(t.ssoToken)return{ssoToken:t.ssoToken}}function St(t){return!!(t&&"userMeta"in t&&t.userMeta)}function Qm(t){let e=[];return e.length&&P("Your Frill Widget configuration is using deprecated options that will eventually be removed. Please update your code to avoid unexpected changes.",e.join(""),`For more help please see ${Nr.WIDGET}`),{config:t,warnings:e}}function Fc(t){return!!t.key}function Rc(t){return Qm(t)}function Cc(t){if(t.frillTokens)return t.frillTokens;if(t.ssoToken)return{ssoToken:t.ssoToken};if(t.user)return t.user}function Sn(t){let{sdk:e,...r}=t||{},{identifiedAt:i,sessionCount:n=0}=e||{},o=new Date().toISOString();return{...r,sdk:{...e,sessionCount:(n||0)+1,identifiedAt:i||o,lastIdentifiedAt:o}}}function bn(t,e,r){return t.identity?.tokens&&(r==="widget"&&t.identity?.tokens&&t.identity.tokens.scope!=="basic"||r==="survey")?t.identity.tokens:St(e)?e.tokens:e}function _n(t,e){try{let r=window.matchMedia(t),i=()=>{let n=!r.matches;e(n)};return i(),typeof r.addEventListener=="function"?r.addEventListener("change",i):r.addListener(i),()=>{typeof r.removeEventListener=="function"?r.removeEventListener("change",i):r.removeListener(i)}}catch(r){console.error(r)}}function Pc(t,e){let{navigation:r,sections:i}=t,n=r.startPage||i.order.find(c=>{let p=i[c];return p.active&&p.display==="embed"}),{ideaSlug:o,announcementSlug:s,section:a}=e,l=a||n;if(o)switch(l){case"roadmap":return Ie(q.ROADMAP_IDEA,{ideaSlug:o});case"create-idea":return Ie(q.VIEW_IDEA,{ideaSlug:o});case"announcements":return Ie(q.ANNOUNCEMENTS_IDEA,{ideaSlug:o});case"ideas":default:return Ie(q.IDEA_IDEA,{ideaSlug:o})}if(s)return Ie(q.VIEW_ANNOUNCEMENT,{announcementSlug:s});switch(l){case"announcements":return q.ANNOUNCEMENTS;case"ideas":return q.IDEAS;case"roadmap":return q.ROADMAP;case"create-idea":return q.CREATE_IDEA}}function Mc(t){return Ie(q.VIEW_ANNOUNCEMENT,{announcementSlug:t})}function Lc(t){let e=t[Wt.IDEA],r=t[Wt.ANNOUNCEMENT],i=t[Wt.SECTION],n=t[Wt.OPEN];return{ideaSlug:typeof e=="string"&&e?e:void 0,announcementSlug:typeof r=="string"&&r?r:void 0,section:Jm(i)?i:void 0,open:!!n&&n!=="0"&&n!=="false"}}function Jm(t){return t==="ideas"||t==="roadmap"||t==="announcements"||t==="create-idea"}var bt=class extends lt{constructor(r,i,n){super(r,i);this.frill=r;this.config=i;this.targeter=n;this.badges=[];this.state={isMobile:!1,isOpen:!1,isLoading:!0,unreadCount:0};this.open=()=>{this.state.isOpen||!this.frame||(this.ipc.client.interaction({type:"open"}),this.state.isOpen=!0,this.update(),this.frame.focus(),this.events.emit("open",void 0))};this.close=()=>{this.state.isOpen&&(this.ipc.client.interaction({type:"close"}),this.state.isOpen=!1,this.update(),this.state.unreadCount&&this.setBadgeCount(0),this.frame&&document.activeElement===this.frame&&this.frame.blur(),this.events.emit("close",void 0))};this.destroy=()=>{this.destroyed=!0,this.ipc?.destroy(),this.style?.parentNode?.removeChild(this.style),this.launcher?.destroy(),this.view?.destroy(),this.mediaQuery?.(),this.frame=void 0,this.launcher=void 0,this.view=void 0,this.style=void 0,delete this.frill.widgets?.[this.id],this.events.emit("destroy",void 0)};this.setBadgeCount=r=>{this.state.unreadCount=r,this.update(),this.events.emit("badgeCount",{announcements:[],count:r})};this.interaction=()=>{this.ipc.client.interaction({type:"hover"})};this.onNotificationClose=()=>{this.events.emit("notificationClose",void 0)};this.getConfig=()=>({href:window.location.href,board:this.board,company:this.company,isMobile:this.state.isMobile,settings:this.settings,storage:this.store.all(),widget:this.widget});this.update=()=>{let{unreadCount:r}=this.state;if(this.launcher?.update(),this.view?.update(),this.badges.length){let{badge:i}=this.settings,n=r>0;for(let o of this.badges)o.style.display=n?"":"none",i.type==="count"&&(o.innerText=`${Math.min(r,99)}`)}};this.updateSettings=(r,i=!1)=>{if(!this.settings)return;let n=this.company.default_language;this.settings=i?on(r,n):Wr(this.settings,r,{language:n}),this.ipc.client.updateSettings(this.settings),this.mediaQuery?.();let{responsiveMediaQuery:o}=this.settings.appearance;o&&(this.mediaQuery=_n(o,this.onResponsiveChange))};this.onAppReady=()=>{this.state.isLoading&&(this.state.isLoading=!1,this.update(),this.ipc.ready(),this.ipc.flush(),this.events.emit("ready",this),this.deepLink.open&&this.open())};this.onNewAnnouncements=r=>{let i=r.length;this.state.unreadCount=i,this.update(),this.events.emit("badgeCount",{announcements:r,count:i})};this.addNotification=r=>{this.frill("notification",{id:r.announcementSlug,options:r,widget:this}),this.events.emit("notificationOpen",void 0)};this.onResponsiveChange=r=>{this.state.isMobile=r,this.ipc.client.responsive({isMobile:r}),this.update()};if(!Fc(i)){P("Your Frill Widget has failed to load. Please check your code snippet is correct.","Reason: Missing widget key");return}this.frill.widgets[this.id]=this;let{config:o}=Rc(i);this.config=o,this.deepLink=Lc(it(window.location.search)),this.parent=this.config.container||document.body,this.ipc=new Ne(i.key,"frame",{open:this.open,close:this.close,setStorage:this.store.set,onLogin:this.onLogin,onLogout:this.onLogout,setNewAnnouncements:this.onNewAnnouncements,ready:this.onAppReady,getConfig:this.getConfig,addNotification:this.addNotification}),this.create().catch(s=>{re&&console.error(s),P("Your Frill Widget has failed to load. Please check your code snippet is correct.",`Reason: ${le(s)?s.message:"Unexpected error"}
Widget key: ${this.config?.key||"Missing key!"}`)})}async create(){if(this.settings)return;let{key:r,loadStyles:i=!0,frillTokens:n,language:o,ssoToken:s,user:a,settings:l,__widget:c}=this.config,{board:p,company:m,widget:f}=c||await this.api.widget();if(this.destroyed)return;if(!f)throw new C("Widget not found");this.board=p,this.company=m,this.widget={idx:f.idx,source:f.source},this.settings=on(f.settings,m.default_language),l&&(this.settings=Wr(this.settings,l,{language:m.default_language}));let{badge:g}=this.settings;if(i&&(this.style=document.createElement("link"),this.style.id=`${Cr}_${this.id}`,this.style.rel="stylesheet",this.style.href=Je,this.parent.prepend(this.style)),!this.targeter&&this.settings.view.type==="embed"&&!this.config.container){let x=document.querySelector(`[${Gt}="${r}"]`);if(!x||!(x instanceof HTMLElement))throw new C(`Could not find widget embed target element [${Gt}="${r}"]`);x.hasAttribute(he)?P(`Your widget (${r}) has already been loaded. Please make sure you cleanup (destroy) the existing widget before calling Frill('widget') again.`):(x.setAttribute(he,"true"),this.parent=x)}this.launcher=Xl(this),this.view=Oc(this);let y={key:r,route:Pc(this.settings,this.deepLink)};this.frill.identity?.tokens&&this.frill.identity.tokens.scope!=="basic"&&(y.frillToken=this.frill.identity.tokens.frillToken,y.frillRefreshToken=this.frill.identity.tokens.frillRefreshToken,y.isAnonymous=this.frill.identity.tokens.email?void 0:"1"),n&&(y.frillToken=n.frillToken,y.frillRefreshToken=n.frillRefreshToken,y.isAnonymous=n.email?void 0:"1"),s&&(y.ssoToken=s),o&&(y.lang=o),a&&(y.user=JSON.stringify(a)),this.config.disableAnalytics&&(y.analytics="0"),this.config.disableCookies&&(y.cookies="0"),this.frill.__isFrillApp&&(y.isFrillApp="1"),this.frame=ct({id:`${Rr}_${this.id}`,className:pl,src:`${Fr}/?${Ae(y)}`});let{responsiveMediaQuery:S}=f.settings.appearance;if(S&&(this.mediaQuery=_n(S,this.onResponsiveChange)),this.launcher.setup(),this.view.setup(),g.type!=="none"){let x=document.createElement("div");x.classList.add(tn),x.classList.add(`${tn}--${g.type}`),x.style.display="none",this.launcher.addBadge(x),this.badges.push(x)}this.ipc.frame=this.frame}createIdea(r){this.ipc.client.createIdea(r)}viewIdea(r,i){this.ipc.client.viewIdea(r,i)}viewAnnouncement(r){this.ipc.client.viewAnnouncement(r)}viewSection(r){this.ipc.client.viewSection(r)}markAsRead(){this.ipc.client.markAsRead(),this.setBadgeCount(0)}getCache(){return this.ipc.client.getCache()}};var or=class{constructor(e,r){this.frill=e;this.options=r;this.observe=!0;this.matched=!1;this.embed=this.getEmbed();if(this.observe=Zm(this.targeting)||!!this.embed,this.observe){this.check();return}this.targeting.when.action!=="api"&&(this.matched=!0,this.create())}get active(){return this.matched&&!!this.frame}get entity(){if("__widget"in this.options)return this.options.__widget.widget;if("__survey"in this.options)return this.options.__survey.survey;throw new Error("Unsupported config")}get targeting(){return this.entity.settings.targeting}get type(){if("__widget"in this.options)return"widget";if("__survey"in this.options)return"survey";throw new Error("Unsupported config")}check({force:e=!1}={}){if(!this.observe&&!e)return;if(this.embed&&this.frame&&!this.embed.element?.isConnected){this.destroy();return}let r=this.matched,i=this.targeting;switch(this.matched=Qa(window.location.href,i),i.when.action){case"enter":{if(!this.matched)return;break}case"exit":{if(!(r&&!this.matched))return;break}case"api":return;case"scroll":break}let n=i.when.delay||0;if(typeof n=="number"&&n>0){this.schedule=setTimeout(()=>{this.create()},n*1e3);return}this.create()}reset(){this.frame?.destroyed&&(this.frame=void 0),this.check({force:!0})}destroy(){if(this.schedule&&(clearTimeout(this.schedule),this.schedule=void 0),!!this.frame){this.embed&&(this.embed=this.getEmbed());try{this.frame.destroy()}catch{}this.frame=void 0}}create(){if(!this.frame){if("__widget"in this.options){this.frame=this.createWidget(this.options);return}if("__survey"in this.options){if(Xt(this.frill))return;let e=this.options.__survey.company,r=this.options.__survey.survey,i=zr(r,this.options.settings,e.default_language),n=this.frill.identity||null,o=n?.userMeta.sdk||{};if(!qr(this.frill,r.idx,i,o,n)&&!this.options.previewMode)return;this.frame=this.createSurvey(this.options);return}throw new Error("Unsupported config")}}createWidget(e){if(this.embed){let i=this.embed.element;if(!i||!(i instanceof HTMLElement)||i.hasAttribute(he))return;i.setAttribute(he,"true"),e.container=i}return new bt(this.frill,e,this)}createSurvey(e){return new ut(this.frill,e,this)}getEmbed(){let e=this.options;return"__widget"in e&&(e.__widget.widget.settings.view.type==="embed"||e.settings?.view?.type==="embed")?{get element(){return this._element||(this._element=document.querySelector(`[${Gt}="${e.key}"]`)),this._element}}:null}};function Zm(t){return t?"showAfter"in t&&t.showAfter.active?!0:!(t.where.type==="all"||!t.where.urls.length):!1}function kc(){return"frill-sdk"}function Wc(){return eh("guest")}function eh(t){return{announcementReactions:t,comments:t,ideas:t,votes:t}}function vn(t){return t==="user"}var ui=class{constructor(e,r){this.frill=e;this.config=r;this.created=!1;this.refreshed=!0;this.destroyed=!1;this.targets=new Map;this.promise=Promise.resolve();this.match=()=>{this.targets.forEach(e=>e.check())};this.call=(e,...r)=>{let i=this.config.callbacks?.[e];i&&i(...r)};this.unidentify=()=>{this.store.remove("identity")};this.destroy=()=>{this.destroyed=!0,this.observer?.destroy(),this.observer=void 0,this.style?.parentNode?.removeChild(this.style),this.targets.forEach((e,r)=>{this.targets.delete(r),e.destroy()}),delete this.frill.containers?.[this.config.key],this.call("onDestroy")};this.config.key||P("Your Frill Container has failed to load. Please check your code snippet is correct.","Reason: Missing container key"),this.api=new ot(this.config.key,{frill:e,language:this.config.language}),this.store=new Fe(kc(),this.config.disableCookies?new st:new at),this.container=document.body,this.promise=this.setup().catch(i=>{re&&console.error(i),P("Your Frill Container has failed to load. Please check your code snippet is correct.",`Reason: ${le(i)?i.message:"Unexpected error"}. Container key: ${this.config?.key||"Missing key!"}`)})}wait(){return this.promise}debug(){if(!this.settings){P("Your Frill Container has not loaded yet.");return}let{surveys:e,widgets:r}=this.settings,i=Array.from(this.targets.values()),n=this.frill.identity?.tokens?`The identified user is ${this.frill.identity.tokens.email||"anonymous"}`:"No user has been identified";De.log(`Your Frill Container has ${e.length} ${$t("survey",e.length)} & ${r.length} ${$t("widget",r.length)}, ${i.length} are currently active or idle.`),De.log(n,Kl(this.frill.identity?.userMeta.sdk)),i.forEach(o=>{let s=o.active,a=o.type,l=Bl(o,this.frill);De.log(`${s?"\u{1F7E2}":"\u{1F7E0}"} ${o.entity.name} (${a})`,l)})}async setup(){De.debug("container:setup"),this.frill.containers[this.config.key]=this,this.style=document.createElement("link"),this.style.id=`${Cr}_${this.config.key}`,this.style.rel="stylesheet",this.style.href=Je,this.container.prepend(this.style);let e=Cc(this.config)||this.store.get("identity");e&&await this.identify(e,{refresh:!1});let r=await this.api.container();if(this.frill.identity||(this.frill.identity={frillHost:r.company.domain,userMeta:Sn({sdk:this.store.get("data")})},this.store.set("data",this.frill.identity.userMeta.sdk)),this.settings=r,this.destroyed)return;let{autoLoad:i=!0}=this.config,n=i===!0||i==="widgets"?r.widgets:[],o=i===!0||i==="surveys"?r.surveys:[];await this.create({...r,widgets:n,surveys:o}),this.checkAuthSettings(e),this.call("onCreate",this)}async refresh(){if(De.debug("container:refresh"),!this.created){this.refreshed=!1;return}this.refreshed=!0;let e=await this.api.container(),r=this.settings.widgets.map(s=>s.public_key),i=this.settings.surveys.map(s=>s.public_key),n=e.widgets.filter(s=>!r.includes(s.public_key)),o=e.surveys.filter(s=>!i.includes(s.public_key));!n.length&&!o.length||await this.create({...e,widgets:n,surveys:o})}async create(e){De.debug("container:create",e.widgets);let{ssoToken:r,language:i,disableAnalytics:n,disableCookies:o,previewMode:s,user:a,surveys:l=[],widgets:c=[]}=this.config,{board:p,company:m,widgets:f=[],surveys:g=[]}=e,S=!!r&&Mt(r)?r:null,x=!1;for(let E of f){let T=c.find(_=>_.key==="all"||_.key===E.public_key),u={ssoToken:S,disableAnalytics:n,disableCookies:o,language:i,user:a,...T,key:E.public_key,loadStyles:!1,__widget:{board:p,company:m,widget:E}},d=u.id||u.key,h=new or(this.frill,u);this.targets.set(d,h),x||(x=h.observe)}for(let E of g){let T=l.find(_=>_.key==="all"||_.key===E.public_key),u={ssoToken:S,disableAnalytics:n,disableCookies:o,language:i,previewMode:s,user:a,...T,key:E.public_key,loadStyles:!1,__survey:{company:m,survey:E}},d=u.id||u.key,h=new or(this.frill,u);this.targets.set(d,h),x||(x=h.observe)}x&&!this.observer&&(this.observer=new pt,this.observer.on(this.match)),this.created=!0,this.refreshed||await this.refresh()}async identify(e,{refresh:r=!0}){if(St(e))this.frill.identity=e;else{this.checkAuthSettings(e);try{let{token:i,refreshToken:n,scope:o,frillHost:s,userMeta:a,userIdx:l,profile:c}=await this.api.identify(e),p={tokens:{idx:l,frillToken:i,frillRefreshToken:n,scope:o,email:"email"in e?e.email:""},frillHost:s,userMeta:a};Lt(e)&&!c.is_guest&&(this.config.disableWarnings||P("You have identified a guest user, but the email is associated with an email/password account. This will work fine for Surveys, but the User will be asked to login if they interact (vote, comment, etc.) with a Widget. You can disable this warning by setting disableWarnings: true.")),p.userMeta.sdk||(p.userMeta.sdk=this.store.get("data"),this.store.remove("data")),this.frill.identity=p}catch{}}if(this.frill.identity&&(this.frill.identity.userMeta=Sn(this.frill.identity.userMeta),this.frill.identity.tokens)){let{sdk:i}=this.frill.identity.userMeta;await this.api.meta({sdk:i}).catch(n=>{})}this.targets.forEach(i=>i.reset()),r&&await this.refresh()}storeUserTokens(e,r){let i=this.store.get("identity");if(!(0,Kt.default)(i,e)){this.store.set("identity",e),this.store.write();for(let n of Object.values(this.frill.widgets))n!==r&&(e?n.identify(e):n.unidentify());for(let n of Object.values(this.frill.surveys))n!==r&&(e?n.identify(e):n.unidentify())}}checkAuthSettings(e){if(!this.settings)return;let{autoLoad:r=!0,ssoToken:i,disableWarnings:n=!1}=this.config,{auth_settings:o,sso_settings:s}=this.settings.company,a=!!(s?.sso_enabled&&s?.sso_allow_email_signup),l=!!i&&Mt(i);if(n)return;i&&!l&&P("Your Frill SSO Token has been ignored because it is not a valid JWT. Please check your code snippet is correct.");let c=o||Wc(),p=Object.values(c).some(vn),m=[];for(let f of Object.values(this.frill.widgets)){let g=f.settings.advanced.authentication;(g?vn(g):p)&&m.push(f)}if(m.length){if(Lt(e)){P(`You have identified a guest user, but ${m.length} of your widgets require user (${a?"SSO":"email/password"}) authentication. The user has been identified, but they may be asked to log in when they use the widget. If you want to use guest authentication (no login) please enable it at a company level, or turn it on for each widget.`);return}r&&!e&&a&&!i&&P(`You have not provided a Frill SSO Token, but ${m.length} of your widgets require SSO authentication. If you want users to be able to interact with the widget please enable guest (or anonymous) authentication for each widget.`,"If you plan to identify an SSO user later, you can disable this warning by setting disableWarnings: true, or delay loading of widgets with autoLoad: false.")}}};var pi=class{constructor(e,r){this.frill=e;this.config=r;this.type="modal";this.classNames={default:"Frill_Notification_Snippet",loading:"Frill_Notification_Snippet--loading",open:"Frill_Notification_Snippet--open",enter:"Frill_Notification_Snippet--enter",content:"Frill_Notification_Snippet__Content"};this.destroy=()=>{delete this.frill.notifications[this.id],this.element&&(this.element.parentNode?.removeChild(this.element),this.widget.onNotificationClose())};this.open=()=>{this.element&&(this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30))};this.close=()=>{this.element.classList.remove(this.classNames.open),setTimeout(()=>{this.destroy()},300)};this.frill.notifications[this.id]=this,this.setup()}get id(){return this.config.id}get options(){return this.config.options}get widget(){return this.config.widget}setup(){let{title:e="",content:r="",theme:i}=this.options,{settings:n,company:o}=this.widget.getConfig(),s=i?.idx||n.appearance.theme.idx||o.theme?.idx||"light";if(this.element=document.createElement("div"),this.element.classList.add(ge,this.classNames.default,`${ge}--${s}`),this.content=document.createElement("div"),this.content.classList.add(this.classNames.content),this.options.badge){let p=Vr(this.options.badge);this.content.appendChild(p)}let a=document.createElement("h2");a.innerText=e,this.content.appendChild(a);let l=document.createElement("p");if(l.innerText=r,this.content.appendChild(l),this.options.button){let p=jr(this.widget,this.options,this.close);this.content.appendChild(p)}let c=Hr();c.addEventListener("click",this.close),this.content.appendChild(c),this.element.appendChild(this.content),this.widget.parent.appendChild(this.element),this.open()}};var fi=class{constructor(e,r){this.frill=e;this.config=r;this.type="modal";this.classNames={default:"Frill_Notification_Banner",loading:"Frill_Notification_Banner--loading",open:"Frill_Notification_Banner--open",enter:"Frill_Notification_Banner--enter",content:"Frill_Notification_Banner__Content",top:"Frill_Notification_Banner--top",bottom:"Frill_Notification_Banner--bottom"};this.destroy=()=>{delete this.frill.notifications[this.id],this.element&&(this.element.parentNode?.removeChild(this.element),this.widget.onNotificationClose())};this.open=()=>{this.element&&(this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30))};this.close=()=>{this.element.classList.remove(this.classNames.open),setTimeout(()=>{this.destroy()},300)};this.frill.notifications[this.id]=this,this.setup()}get id(){return this.config.id}get options(){return this.config.options}get widget(){return this.config.widget}setup(){let{title:e,position:r}=this.options,{settings:i,company:n}=this.widget.getConfig(),o=i.appearance.theme.idx||n.theme?.idx||"light";if(this.element=document.createElement("div"),this.element.classList.add(ge,this.classNames.default,this.classNames[r||"top"],`${ge}--${o}`),this.content=document.createElement("div"),this.content.classList.add(this.classNames.content),this.options.badge){let l=Vr(this.options.badge);this.content.appendChild(l)}let s=document.createElement("h2");if(s.innerText=e,this.content.appendChild(s),this.options.button){let l=jr(this.widget,this.options,this.close);this.content.appendChild(l)}let a=Hr();a.addEventListener("click",this.close),this.content.appendChild(a),this.element.appendChild(this.content),this.widget.parent.appendChild(this.element),this.open()}};var di=class{constructor(e,r){this.frill=e;this.config=r;this.type="modal";this.classNames={default:"Frill_Notification_Modal",loading:"Frill_Notification_Modal--loading",open:"Frill_Notification_Modal--open",enter:"Frill_Notification_Modal--enter",content:"Frill_Notification_Modal__Content",shadow:"Frill_Notification_Modal__Shadow"};this.lock=dt();this.destroy=()=>{this.lock.off(),this.ipc.destroy(),delete this.frill.notifications[this.id],this.element&&this.element.parentNode?.removeChild(this.element)};this.close=()=>{this.element.classList.remove(this.classNames.open),this.shadow.removeEventListener("click",this.onWidowClick),this.lock.off(),setTimeout(()=>{this.destroy(),this.widget.onNotificationClose()},300)};this.onWidowClick=e=>{e.__frillHandled||this.element&&!this.content.contains(e.target)&&this.close()};this.getConfig=async()=>{let e=this.options.__cache||await this.widget.getCache(),r=this.widget.getConfig();return r.cache=e,r.settings.appearance.showCloseButton=this.options.showCloseButton,r};this.onAppReady=()=>{this.ipc.ready(),this.ipc.flush(),this.open()};this.frill.notifications[this.id]=this,this.ipc=new Br(this.widget.config.key,"modal",{ready:this.onAppReady,getConfig:this.getConfig,close:this.close,open:()=>{},setStorage:()=>{},onLogin:()=>{},onLogout:()=>{},setNewAnnouncements:()=>{},addNotification:()=>{}}),this.setup()}get id(){return this.config.id}get options(){return this.config.options}get widget(){return this.config.widget}setup(){let{announcementSlug:e,width:r,height:i}=this.options;this.element=document.createElement("div"),this.element.classList.add(ge,this.classNames.default);let{key:n,frillTokens:o,ssoToken:s,user:a}=this.widget.config,l=ct({id:`${Rr}_${n}_notification`,src:`${Fr}/?${Ae({key:n,frillToken:o?.frillToken,frillRefreshToken:o?.frillRefreshToken,user:JSON.stringify(a),ssoToken:s,notification:"1",route:Mc(e)})}`});this.ipc.frame=l,this.content=document.createElement("div"),this.content.classList.add(this.classNames.content),this.content.style.width=r?.replace("%","vw")||"640px",this.content.style.height=i?.replace("%","vh")||"500px",this.content.appendChild(l),this.shadow=document.createElement("div"),this.shadow.classList.add(this.classNames.shadow),this.element.appendChild(this.content),this.element.appendChild(this.shadow),this.widget.parent.appendChild(this.element)}open(){this.element&&(this.lock.on(),this.shadow.addEventListener("click",this.onWidowClick),this.element.classList.add(this.classNames.open,this.classNames.enter),setTimeout(()=>{this.element?.classList.remove(this.classNames.enter)},30))}};function Uc(t,e){switch(e.options.type){case"snippet":return new pi(t,e);case"banner":return new fi(t,e);case"modal":return new di(t,e);default:throw new C("Invalid launcher option. Available options: `floating`, `selector` and `tray`")}}var th=window.Frill?.q||{};function wn(){return Object.values(M.containers)}function Gc(){return Object.values(M.surveys)}function Bc(){return Object.values(M.widgets)}function rh(){return Object.values(M.notifications)}function ih(){return[...Gc(),...Bc()]}function nh(t){let e=t.id||t.key,r=M.surveys[e];return r||(r=new ut(M,t)),r}function oh(t){let e=t.id||t.key,r=M.widgets[e];return r?r.destroyed||t.callbacks?.onReady?.(r):r=new bt(M,t),r}function sh(t){let e=t.id,r=M.notifications[e];if(!r){if(rh().length&&!t.force)return;r=Uc(M,t)}return r}async function ah(t){let e=M.containers[t.key];return e||(e=new ui(M,t),await e.wait()),e}function xn(t){let e=new Promise(r=>r(t));return e.destroy=t?.destroy||function(){},e}async function lh(t){let e=St(t)?t:Nc(t);if(!e)return Kc();if((0,Kt.default)(e,M.lastIdentity))return;M.lastIdentity=e;let r=wn()[0];r?await r.identify(e,{refresh:!0}):qt("Frill('identify')");for(let i of Bc()){let n=bn(M,e,"widget");i.identify(n)}for(let i of Gc()){let n=bn(M,e,"survey");i.identify(n)}}async function Kc(){delete M.identity,delete M.lastIdentity;let t=wn()[0];t&&t.unidentify();for(let e of ih())e.unidentify()}function ch(){let t=wn()[0];if(!t){P("You have not loaded a Container, so your Surveys or Widgets will be created manually. Call Frill('container', { key: 'YOUR-KEY-HERE' }) to automatically create them.");return}t.debug()}function $c(t,e){switch(t){case"identify":return lh(e);case"unidentify":return Kc();case"help":return ch();case"container":return ah(e);case"notification":return xn(sh(e));case"survey":return xn(nh(e));case"widget":return xn(oh(e));default:throw new Error(`Unsupported method: ${t}`)}}async function Yc(){for(let{params:t,resolve:e,reject:r}of Object.values(th))try{await $c(...t).then(e)}catch(i){r(i)}}var M=Object.assign($c,{history:[],lastIdentity:void 0,q:{},containers:{},notifications:{},surveys:{},widgets:{},__isFrillApp:window.Frill?.__isFrillApp});window.Frill=M;Yc();})();
/*! Bundled license information:

js-cookie/dist/js.cookie.mjs:
  (*! js-cookie v3.0.5 | MIT *)
*/
